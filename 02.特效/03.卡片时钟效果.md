---
title: 卡片时钟效果
date: 2025-09-25
permalink: /special-effects/card-clock
categories:
  - 特效
---

# 卡片时钟效果

## 简介

卡片时钟效果是一个使用 HTML、CSS 和 TypeScript 实现的数字时钟显示效果。通过 13 个片段的不同组合来显示数字 0-9，创造出独特的卡片式数字显示效果。该效果使用 CSS transition 实现平滑的动画过渡，为用户带来良好的视觉体验。

## 效果演示

<demo react="react/effects/CardClock/example.tsx" 
:reactFiles="['react/effects/CardClock/example.tsx', 'react/effects/CardClock/index.tsx','react/effects/CardClock/index.scss']" />

## 核心技术要点

### 1. 片段设计

卡片时钟使用 13 个片段来组合成数字 0-9：

```
1 2 3 4 5 6 7 8 9 10 11 12 13
```

每个数字都有对应的片段显示状态：

```ts
const NUMBER_STATES: number[][] = [
	[1, 2, 3, 4, 5, 6, 8, 9, 10, 11, 12, 13], // 0
	[3, 5, 8, 10, 13], // 1
	[1, 2, 3, 5, 6, 7, 8, 9, 11, 12, 13], // 2
	[1, 2, 3, 5, 6, 7, 8, 10, 11, 12, 13], // 3
	[1, 3, 4, 5, 6, 7, 8, 10, 13], // 4
	[1, 2, 3, 4, 6, 7, 8, 10, 11, 12, 13], // 5
	[1, 2, 3, 4, 6, 7, 8, 9, 10, 11, 12, 13], // 6
	[1, 2, 3, 5, 8, 10, 13], // 7
	[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13], // 8
	[1, 2, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13] // 9
];
```

### 2. CSS 样式实现

使用 CSS 变量控制片段大小，支持自定义尺寸：

```scss
.card-clock {
	background-color: #212121;
	display: flex;
	align-items: center;
	justify-content: center;
	margin: 0;
	font-family: Arial, sans-serif;
	width: 100%;
	height: 100%;
}

.flex {
	display: flex;
	align-items: center;
	justify-content: center;
	margin: 0 15px;
	border: 1px solid #fff;
	padding: 8px;
	border-radius: 10px;
	width: 20%;
	height: 75%;
}

.number {
	position: relative;
	width: 100%;
	height: 100%;
	margin: 0 3px;
	--piece-size: 10px; // 默认片段大小
}

.piece {
	background-color: #fff;
	border: 1px solid transparent;
	border-right-color: #aaa;
	border-bottom-color: #aaa;
	position: absolute;
	width: var(--piece-size);
	height: var(--piece-size);
	transform: scale(0);
	transition: transform 0.2s linear;
	border-radius: 2px;

	&.show {
		transform: scale(1);
	}
}

// 13个正方形片段的精确位置布局
.piece:nth-of-type(1) {
	top: 0px;
	left: 0px;
} // top-left
.piece:nth-of-type(2) {
	top: 0px;
	left: 40px;
} // top-center
.piece:nth-of-type(3) {
	top: 0px;
	left: 80px;
} // top-right

.piece:nth-of-type(4) {
	top: 30px;
	left: 0px;
} // upper-middle-left
.piece:nth-of-type(5) {
	top: 30px;
	left: 80px;
} // upper-middle-right

.piece:nth-of-type(6) {
	top: 60px;
	left: 0px;
} // middle-left
.piece:nth-of-type(7) {
	top: 60px;
	left: 40px;
} // middle-center
.piece:nth-of-type(8) {
	top: 60px;
	left: 80px;
} // middle-right

.piece:nth-of-type(9) {
	top: 90px;
	left: 0px;
} // lower-middle-left
.piece:nth-of-type(10) {
	top: 90px;
	left: 80px;
} // lower-middle-right

.piece:nth-of-type(11) {
	top: 120px;
	left: 0px;
} // bottom-left
.piece:nth-of-type(12) {
	top: 120px;
	left: 40px;
} // bottom-center
.piece:nth-of-type(13) {
	top: 120px;
	left: 80px;
} // bottom-right
```

### 3. 自定义片段大小

通过 `pieceSize` 属性可以控制每个片段的大小：

```tsx
// 固定为 10x10px
<CardClock pieceSize={10} />

// 固定为 15x15px
<CardClock pieceSize={15} />

// 固定为 20x20px
<CardClock pieceSize={20} />

```

### 4. 响应式设计

通过 aspect-ratio 和百分比定位实现真正的响应式设计：

```scss
.container {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100%;
	max-width: 100%;
	max-height: 100%;
}

.flex {
	height: 80%;
	min-height: 200px;
	aspect-ratio: 3 / 5;
}
```

## React 组件实现

## 实现原理

### 1. 数字显示原理

卡片时钟通过 13 个片段的不同组合来显示数字 0-9。每个片段都有固定的位置，通过添加或移除 `.show` 类来控制显示或隐藏。

### 2. 动画实现

使用 CSS transition 实现平滑的显示/隐藏动画：

```scss
.piece {
	transform: scale(0);
	transition: transform 0.2s linear;
}

.piece.show {
	transform: scale(1);
}
```

### 3. 时间更新机制

使用 `setInterval` 每秒更新一次时间显示：

```tsx
useEffect(() => {
	if (propHour === undefined && propMinute === undefined && propSecond === undefined) {
		const updateTime = () => {
			const now = new Date();
			setTime({
				hour: now.getHours(),
				minute: now.getMinutes(),
				second: now.getSeconds()
			});
		};

		updateTime();
		const interval = setInterval(updateTime, 1000);

		return () => clearInterval(interval);
	}
}, [propHour, propMinute, propSecond]);
```

## 使用说明

### 基本使用

```tsx
import CardClock from './effects/CardClock';

function App() {
	return (
		<div style={{ height: '100vh' }}>
			<CardClock />
		</div>
	);
}
```

### 自定义时间显示

```tsx
<CardClock hour={12} minute={30} second={45} />
```

## 优化建议

### 1. 性能优化

- 使用 `React.memo` 优化组件渲染
- 避免不必要的状态更新

### 2. 可访问性

- 添加适当的 aria-label 属性
- 支持键盘导航

### 3. 主题定制

- 支持自定义颜色主题
- 支持不同的尺寸配置

## 浏览器兼容性

- Chrome 36+
- Firefox 16+
- Safari 9+
- Edge 12+
- IE 10+

## 结语

卡片时钟效果通过巧妙的片段组合和 CSS 动画，创造出独特的数字显示效果。该效果不仅展示了 CSS 和 JavaScript 的强大功能，也为网页增添了动态和趣味性。通过合理的优化和自定义配置，可以将其应用于各种场景，如时钟应用、倒计时器等.
