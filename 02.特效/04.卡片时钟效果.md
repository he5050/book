---
title: 卡片时钟效果
date: 2025-09-25
permalink: /special-effects/card-clock
categories:
  - 特效
---

# 卡片时钟效果

## 简介

卡片时钟效果是一种现代化的时间显示方式，通过卡片式的设计展示时间信息，具有良好的视觉效果和用户体验。本文档提供了两种不同的实现方案：

1. **片段式数字时钟**：使用 13 个片段组合显示数字 0-9 的传统实现
2. **现代卡片时钟**：现代化卡片设计，支持丰富的日期格式配置

## 方案一：片段式数字时钟

### 简介

片段式数字时钟是一个使用 HTML、CSS 和 TypeScript 实现的数字时钟显示效果。通过 13 个片段的不同组合来显示数字 0-9，创造出独特的卡片式数字显示效果。该效果使用 CSS transition 实现平滑的动画过渡，为用户带来良好的视觉体验。

该组件支持丰富的自定义配置：

- 实时时间显示和自定义时间显示两种模式
- 可自定义片段大小（pieceSize），默认 10px
- 可自定义容器尺寸（containerWidth/containerHeight）
- 支持响应式设计，适配不同屏幕尺寸
- 使用 CSS 变量和 calc() 函数实现灵活的布局控制

### 效果演示

<demo react="react/effects/CardClock/example.tsx" 
:reactFiles="['react/effects/CardClock/example.tsx', 'react/effects/CardClock/index.tsx','react/effects/CardClock/index.scss']" />

## 现代卡片时钟演示

<demo react="react/effects/ModernCardClock/example.tsx" 
:reactFiles="['react/effects/ModernCardClock/example.tsx', 'react/effects/ModernCardClock/index.tsx','react/effects/ModernCardClock/index.scss']" />

### 核心技术要点

#### 1. 片段设计

卡片时钟使用 13 个片段来组合成数字 0-9，布局与原版 HTML 代码完全一致：

```
 1  2  3
 4     5
 6  7  8
 9    10
11 12 13
```

每个数字都有对应的片段显示状态：

```ts
const NUMBER_STATES: number[][] = [
	[1, 2, 3, 4, 5, 6, 8, 9, 10, 11, 12, 13], // 0
	[3, 5, 8, 10, 13], // 1
	[1, 2, 3, 5, 6, 7, 8, 9, 11, 12, 13], // 2
	[1, 2, 3, 5, 6, 7, 8, 10, 11, 12, 13], // 3
	[1, 3, 4, 5, 6, 7, 8, 10, 13], // 4
	[1, 2, 3, 4, 6, 7, 8, 10, 11, 12, 13], // 5
	[1, 2, 3, 4, 6, 7, 8, 9, 10, 11, 12, 13], // 6
	[1, 2, 3, 5, 8, 10, 13], // 7
	[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13], // 8
	[1, 2, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13] // 9
];
```

#### 2. CSS 样式实现

使用 CSS 变量和 calc() 函数实现响应式片段布局：

```scss
.card-clock {
	background-color: #212121;
	display: flex;
	align-items: center;
	justify-content: center;
	margin: 0;
	font-family: Arial, sans-serif;

	.container {
		display: flex;
		align-items: center;
		justify-content: center;
		transform: scale(0.8); // 适当缩放以适应容器
	}

	.flex {
		display: flex;
		align-items: center;
		justify-content: center;
		margin: 0 8px;
		border: 1px solid #fff;
		padding: 20px;
		border-radius: 10px;
	}

	.number {
		position: relative;
		height: calc(var(--piece-size) * 5.8);
		width: calc(var(--piece-size) * 3.4);
		margin: 20px;
		--piece-size: 10px;
	}

	.piece {
		background-color: #fff;
		border: 2px solid transparent;
		border-right-color: #aaa;
		border-bottom-color: #aaa;
		position: absolute;
		height: var(--piece-size);
		width: var(--piece-size);
		transform: scale(0);
		transition: transform 0.2s linear;

		&.show {
			transform: scale(1);
		}
	}

	// 13 个片段的位置，使用 calc()基于片段大小计算
	.piece:nth-of-type(1) {
		top: 0;
		left: 0;
	}
	.piece:nth-of-type(2) {
		top: 0;
		left: calc(var(--piece-size) * 1.2);
	}
	.piece:nth-of-type(3) {
		top: 0;
		left: calc(var(--piece-size) * 2.4);
	}
	.piece:nth-of-type(4) {
		top: calc(var(--piece-size) * 1.2);
		left: 0;
	}
	.piece:nth-of-type(5) {
		top: calc(var(--piece-size) * 1.2);
		left: calc(var(--piece-size) * 2.4);
	}
	.piece:nth-of-type(6) {
		top: calc(var(--piece-size) * 2.4);
		left: 0;
	}
	.piece:nth-of-type(7) {
		top: calc(var(--piece-size) * 2.4);
		left: calc(var(--piece-size) * 1.2);
	}
	.piece:nth-of-type(8) {
		top: calc(var(--piece-size) * 2.4);
		left: calc(var(--piece-size) * 2.4);
	}
	.piece:nth-of-type(9) {
		top: calc(var(--piece-size) * 3.6);
		left: 0;
	}
	.piece:nth-of-type(10) {
		top: calc(var(--piece-size) * 3.6);
		left: calc(var(--piece-size) * 2.4);
	}
	.piece:nth-of-type(11) {
		top: calc(var(--piece-size) * 4.8);
		left: 0;
	}
	.piece:nth-of-type(12) {
		top: calc(var(--piece-size) * 4.8);
		left: calc(var(--piece-size) * 1.2);
	}
	.piece:nth-of-type(13) {
		top: calc(var(--piece-size) * 4.8);
		left: calc(var(--piece-size) * 2.4);
	}
}
```

## 方案二：现代卡片时钟

### 简介

现代卡片时钟基于掘金文章的设计理念，提供了更加丰富的功能配置和现代化的视觉效果。支持多种日期格式、自定义日期显示、主题切换等高级功能。

### 特点

- 🎨 现代化的卡片设计，支持多种主题
- ⏰ 实时时间显示，精确到秒
- 📅 灵活的日期格式配置
- 支持自定义日期显示
- 📱 响应式布局，适配移动端
- ✨ 平滑的动画效果
- TypeScript 支持，类型安全

### 功能配置

#### 日期格式控制选项

- **年月日显示** (yyyy-mm-dd)：显示完整的年月日信息
- **年月显示** (YYYY-MM)：仅显示年份和月份
- **时分秒显示**：实时显示当前时间
- **星期几显示**：显示当前是星期几
- **当前周数显示**：显示当前是一年中的第几周

#### 自定义日期支持

支持通过 props 传入自定义日期值：

- **完整日期格式**：`2024-03-15`
- **年月格式**：`2024-03`

#### 主题配置

- **Light 主题**：浅色背景，适合明亮环境
- **Dark 主题**：深色背景，适合暗色环境
- **Gradient 主题**：渐变背景，视觉效果更佳

### React 组件实现

#### 组件文件结构

```
example/components/react/effects/
├── CardClock/                    # 片段式数字时钟
│   ├── index.tsx                 # 主组件
│   ├── index.scss                # 样式文件
│   └── example.tsx               # 使用示例
└── ModernCardClock/              # 现代卡片时钟
    ├── index.tsx                 # 主组件
    ├── index.scss                # 样式文件
    └── example.tsx               # 使用示例
```

#### 在线演示

查看两种不同的卡片时钟实现：

```tsx
// 片段式数字时钟
import CardClockExample from './effects/CardClock/example';

// 现代卡片时钟
import ModernCardClockExample from './effects/ModernCardClock/example';

function App() {
	return (
		<div>
			<CardClockExample />
			<ModernCardClockExample />
		</div>
	);
}
```

演示页面特性：

- **两种实现方案**：片段式 vs 现代卡片式
- 🎨 **实时预览**：配置修改即时生效
- 📝 **交互式配置**：可视化配置面板
- **使用说明**：详细的功能介绍和配置说明

#### 类型定义

```typescript
/**
 * 日期格式配置选项
 */
export interface DateFormatOptions {
	/** 显示年月日 (yyyy-mm-dd) */
	showFullDate?: boolean;
	/** 显示年月 (YYYY-MM) */
	showYearMonth?: boolean;
	/** 显示时分秒 */
	showTime?: boolean;
	/** 显示星期几 */
	showWeekday?: boolean;
	/** 显示当前周数 */
	showWeekNumber?: boolean;
}

/**
 * 卡片时钟组件属性
 */
export interface CardClockProps {
	/** 自定义日期值，支持 yyyy-mm-dd 或 YYYY-MM 格式 */
	customDate?: string;
	/** 日期格式配置 */
	formatOptions?: DateFormatOptions;
	/** 时钟标题 */
	title?: string;
	/** 主题样式 */
	theme?: 'light' | 'dark' | 'gradient';
	/** 是否显示动画效果 */
	animated?: boolean;
}
```

#### 基础使用

```tsx
import CardClock from './CardClock';

// 基础用法 - 实时时钟
<CardClock />

// 自定义配置
<CardClock
  title="数字时钟"
  theme="gradient"
  animated={true}
  formatOptions={{
    showFullDate: true,
    showTime: true,
    showWeekday: true,
  }}
/>

// 自定义日期显示
<CardClock
  customDate="2024-03-15"
  formatOptions={{
    showFullDate: true,
    showYearMonth: true,
    showWeekday: true,
    showWeekNumber: true,
  }}
/>
```

#### 高级配置示例

```tsx
// 完整信息显示
<CardClock
  title="完整信息时钟"
  theme="dark"
  animated={true}
  formatOptions={{
    showFullDate: true,
    showYearMonth: true,
    showTime: true,
    showWeekday: true,
    showWeekNumber: true,
  }}
/>

// 简洁模式
<CardClock
  title="简洁时钟"
  theme="light"
  animated={false}
  formatOptions={{
    showTime: true,
    showWeekday: true,
  }}
/>

// 年月显示模式
<CardClock
  customDate="2024-03"
  title="月份时钟"
  theme="gradient"
  formatOptions={{
    showYearMonth: true,
    showWeekNumber: true,
  }}
/>
```

### 核心功能实现

#### 1. 时间格式化函数

```typescript
const formatDate = (date: Date, format: string): string => {
	const year = date.getFullYear();
	const month = String(date.getMonth() + 1).padStart(2, '0');
	const day = String(date.getDate()).padStart(2, '0');
	const hours = String(date.getHours()).padStart(2, '0');
	const minutes = String(date.getMinutes()).padStart(2, '0');
	const seconds = String(date.getSeconds()).padStart(2, '0');

	const weekdays = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];
	const weekday = weekdays[date.getDay()];

	switch (format) {
		case 'yyyy-mm-dd':
			return `${year}-${month}-${day}`;
		case 'YYYY-MM':
			return `${year}-${month}`;
		case 'time':
			return `${hours}:${minutes}:${seconds}`;
		case 'weekday':
			return weekday;
		case 'week':
			return `第${getWeekNumber(date)}周`;
		default:
			return '';
	}
};
```

#### 2. 周数计算

```typescript
const getWeekNumber = (date: Date): number => {
	const firstDayOfYear = new Date(date.getFullYear(), 0, 1);
	const pastDaysOfYear = (date.getTime() - firstDayOfYear.getTime()) / 86400000;
	return Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7);
};
```

#### 3. 自定义日期解析

```typescript
const parseCustomDate = (dateStr: string): Date => {
	if (dateStr.match(/^\d{4}-\d{2}-\d{2}$/)) {
		// yyyy-mm-dd 格式
		return new Date(dateStr);
	} else if (dateStr.match(/^\d{4}-\d{2}$/)) {
		// YYYY-MM 格式，默认为该月第一天
		return new Date(`${dateStr}-01`);
	}
	return new Date();
};
```

### 样式特性

#### CSS 变量和主题

```css
/* 渐变主题 */
.card-clock.gradient {
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	color: #ffffff;
}

/* 深色主题 */
.card-clock.dark {
	background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
	color: #ecf0f1;
}

/* 浅色主题 */
.card-clock.light {
	background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
	color: #2c3e50;
}
```

#### 动画效果

```css
/* 浮动动画 */
.card-clock.animated {
	animation: cardFloat 6s ease-in-out infinite;
}

@keyframes cardFloat {
	0%,
	100% {
		transform: translateY(0px);
	}
	50% {
		transform: translateY(-10px);
	}
}

/* 悬停效果 */
.card-clock.animated:hover {
	transform: translateY(-5px) scale(1.02);
	box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
}
```

## 应用场景

- 📊 **仪表板界面**：作为时间显示组件
- 🖥️ **管理后台**：系统时间展示
- 📱 **移动应用**：时钟小部件
- 🌐 **网站首页**：装饰性时间显示
- 📝 **个人博客**：侧边栏时钟组件
- 📅 **日程管理**：当前时间提醒
- 🎮 **游戏界面**：游戏内时钟显示

## 性能优化

### 1. 避免不必要的重渲染

```typescript
const MemoizedCardClock = React.memo(CardClock, (prevProps, nextProps) => {
	// 自定义比较逻辑
	return JSON.stringify(prevProps) === JSON.stringify(nextProps);
});
```

### 2. 优化定时器

```typescript
useEffect(() => {
	if (customDate) return; // 自定义日期时不需要定时器

	const timer = setInterval(() => {
		setCurrentTime(new Date());
	}, 1000);

	return () => clearInterval(timer);
}, [customDate]);
```

## 结语

卡片时钟效果通过不同的实现方案，展示了从传统片段式显示到现代卡片设计的演进。两种方案各有特色：

**片段式数字时钟**：

- 使用 13 个片段的精巧布局实现数字 0-9 的显示
- 通过 CSS 变量和 calc() 函数实现响应式设计
- 利用 React 状态管理实现时间更新和组件渲染
- 通过 CSS transition 实现平滑的动画效果

**现代卡片时钟**：

- 现代化的卡片设计和丰富的配置选项
- 支持多种日期格式和自定义日期显示
- 提供多种主题和动画效果
- 完整的 TypeScript 类型支持

通过合理的选择和配置，可以将这些组件应用于各种场景，如时钟应用、倒计时器、数字显示面板等。组件具有良好的可扩展性和可维护性，可以根据具体需求进行进一步定制和优化。
