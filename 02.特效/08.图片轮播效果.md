---
title: 图片轮播效果
date: 2025-09-26
permalink: /special-effects/image-carousel
categories:
  - 特效
---

# 图片轮播效果

## 简介

图片轮播效果是一个使用 React 和 CSS 实现的全屏图片轮播组件，具有滑入动画、指示点切换和自动播放功能。该组件展示了多张图片，每张图片都配有标题，并通过底部的指示点进行切换。

## 效果演示

<demo react="react/effects/ImageCarousel/example.tsx" 
:reactFiles="['react/effects/ImageCarousel/example.tsx', 'react/effects/ImageCarousel/index.tsx','react/effects/ImageCarousel/index.scss']" />

## 核心实现

### HTML 结构

```html
<div class="image-carousel">
	<div class="card">
		<div class="content">
			<h1 id="title">标题</h1>
		</div>
		<div class="image">
			<img src="image-url" alt="图片描述" id="slide" />
		</div>
	</div>
	<div class="dots">
		<span class="dot"></span>
		<span class="dot"></span>
		<span class="dot"></span>
	</div>
</div>
```

### CSS 样式

```css
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&display=swap');

.image-carousel {
	height: 100vh;
	margin: 0;
	display: flex;
	align-items: center;
	background-color: #fff;
	overflow: hidden;
	transition: all 1s ease-in-out;
	position: relative;
}

.card {
	width: 500px;
	height: 200px;
	max-width: 80vw;
	margin: 0 auto;
	display: grid;
	grid-template-columns: 1fr 1fr;
	border-radius: 5px;
	overflow: hidden;
	background-color: rgba(255, 255, 255, 0.4);
	backdrop-filter: blur(10px);
	-webkit-backdrop-filter: blur(10px);
	box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.content {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	z-index: 50;
	background-color: #fff;
}

#title {
	font-weight: 400;
	font-family: 'Cinzel', serif;
	color: #2e2d2d;
	font-size: 1.2rem;
}

.image {
	overflow: hidden;
}

#slide {
	height: 100%;
	width: 100%;
	object-fit: cover;

	&.slide-animation {
		animation: slidein 0.5s ease-in-out forwards;
	}
}

.dots {
	width: 100%;
	position: absolute;
	bottom: 10px;
	left: 0;
	display: flex;
	gap: 10px;
	justify-content: center;
	align-items: center;
}

.dot {
	height: 15px;
	width: 15px;
	display: inline-block;
	border-radius: 50%;
	background-color: rgba(255, 255, 255, 0.4);
	cursor: pointer;
	transition: background-color 0.3s ease;
}

.dot.active {
	background-color: #fff;
}

@keyframes slidein {
	from {
		transform: translateX(-3000px);
	}
	to {
		transform: translateX(0);
	}
}

@media (width >=48rem) {
	#title {
		font-size: 2rem;
	}
}
```

### JavaScript 逻辑

```tsx
import React, { useState, useEffect } from 'react';
import './index.scss';

interface Slide {
	title: string;
	imageUrl: string;
	imageAlt: string;
}

interface ImageCarouselProps {
	slides?: Slide[];
	autoPlay?: boolean;
	interval?: number;
	className?: string;
	style?: React.CSSProperties;
}

const ImageCarousel: React.FC<ImageCarouselProps> = ({
	slides = [
		{
			title: '好景',
			imageUrl: 'https://q6.itc.cn/q_70/images03/20250116/b5dba16a1f5749a6a375f20f901d6381.png',
			imageAlt: '桂林山水'
		},
		{
			title: '好山',
			imageUrl:
				'https://img0.baidu.com/it/u=3902947011,207703161&fm=253&app=138&f=JPEG?w=800&h=1455',
			imageAlt: '桂林山水'
		},
		{
			title: '好水',
			imageUrl:
				'https://img0.baidu.com/it/u=4091158592,2102354044&fm=253&app=138&f=JPEG?w=800&h=1455',
			imageAlt: '桂林山水'
		}
	],
	autoPlay = true,
	interval = 2000,
	className = '',
	style = {}
}) => {
	const [current, setCurrent] = useState(0);
	const [isAnimating, setIsAnimating] = useState(false);

	const goToSlide = (index: number) => {
		if (index !== current && !isAnimating) {
			setIsAnimating(true);
			setCurrent(index);
			// 动画结束后重置状态
			setTimeout(() => {
				setIsAnimating(false);
			}, 500);
		}
	};

	const nextSlide = () => {
		setCurrent(prev => (prev + 1) % slides.length);
	};

	useEffect(() => {
		let intervalId: NodeJS.Timeout | null = null;

		if (autoPlay) {
			intervalId = setInterval(() => {
				nextSlide();
			}, interval);
		}

		return () => {
			if (intervalId) {
				clearInterval(intervalId);
			}
		};
	}, [autoPlay, interval, slides.length]);

	return (
		<div
			className={`image-carousel ${className}`}
			style={{
				...style,
				backgroundImage: `url(${slides[current].imageUrl})`
			}}
		>
			<div className="card">
				<div className="content">
					<h1 id="title">{slides[current].title}</h1>
				</div>
				<div className="image">
					<img
						src={slides[current].imageUrl}
						alt={slides[current].imageAlt}
						id="slide"
						className={isAnimating ? 'slide-animation' : ''}
					/>
				</div>
			</div>
			<div className="dots">
				{slides.map((_, index) => (
					<span
						key={index}
						className={`dot ${index === current ? 'active' : ''}`}
						onClick={() => goToSlide(index)}
					/>
				))}
			</div>
		</div>
	);
};

export default ImageCarousel;
```

## React 组件实现

### 主组件

```tsx
import React, { useState, useEffect } from 'react';
import './index.scss';

interface Slide {
	title: string;
	imageUrl: string;
	imageAlt: string;
}

interface ImageCarouselProps {
	slides?: Slide[];
	autoPlay?: boolean;
	interval?: number;
	className?: string;
	style?: React.CSSProperties;
}

const ImageCarousel: React.FC<ImageCarouselProps> = ({
	slides = [
		{
			title: '好景',
			imageUrl: 'https://q6.itc.cn/q_70/images03/20250116/b5dba16a1f5749a6a375f20f901d6381.png',
			imageAlt: '桂林山水'
		},
		{
			title: '好山',
			imageUrl:
				'https://img0.baidu.com/it/u=3902947011,207703161&fm=253&app=138&f=JPEG?w=800&h=1455',
			imageAlt: '桂林山水'
		},
		{
			title: '好水',
			imageUrl:
				'https://img0.baidu.com/it/u=4091158592,2102354044&fm=253&app=138&f=JPEG?w=800&h=1455',
			imageAlt: '桂林山水'
		}
	],
	autoPlay = true,
	interval = 2000,
	className = '',
	style = {}
}) => {
	const [current, setCurrent] = useState(0);
	const [isAnimating, setIsAnimating] = useState(false);

	const goToSlide = (index: number) => {
		if (index !== current && !isAnimating) {
			setIsAnimating(true);
			setCurrent(index);
			// 动画结束后重置状态
			setTimeout(() => {
				setIsAnimating(false);
			}, 500);
		}
	};

	const nextSlide = () => {
		setCurrent(prev => (prev + 1) % slides.length);
	};

	useEffect(() => {
		let intervalId: NodeJS.Timeout | null = null;

		if (autoPlay) {
			intervalId = setInterval(() => {
				nextSlide();
			}, interval);
		}

		return () => {
			if (intervalId) {
				clearInterval(intervalId);
			}
		};
	}, [autoPlay, interval, slides.length]);

	return (
		<div
			className={`image-carousel ${className}`}
			style={{
				...style,
				backgroundImage: `url(${slides[current].imageUrl})`
			}}
		>
			<div className="card">
				<div className="content">
					<h1 id="title">{slides[current].title}</h1>
				</div>
				<div className="image">
					<img
						src={slides[current].imageUrl}
						alt={slides[current].imageAlt}
						id="slide"
						className={isAnimating ? 'slide-animation' : ''}
					/>
				</div>
			</div>
			<div className="dots">
				{slides.map((_, index) => (
					<span
						key={index}
						className={`dot ${index === current ? 'active' : ''}`}
						onClick={() => goToSlide(index)}
					/>
				))}
			</div>
		</div>
	);
};

export default ImageCarousel;
```

### 示例组件

```tsx
import React, { useState } from 'react';
import ImageCarousel from './index';

const ImageCarouselExample: React.FC = () => {
	const [autoPlay, setAutoPlay] = useState(true);
	const [interval, setInterval] = useState(2000);
	const [customSlides, setCustomSlides] = useState([
		{
			title: '春天',
			imageUrl:
				'https://img0.baidu.com/it/u=3902947011,207703161&fm=253&app=138&f=JPEG?w=800&h=1455',
			imageAlt: '春天的风景'
		},
		{
			title: '夏天',
			imageUrl:
				'https://img0.baidu.com/it/u=4091158592,2102354044&fm=253&app=138&f=JPEG?w=800&h=1455',
			imageAlt: '夏天的风景'
		},
		{
			title: '秋天',
			imageUrl:
				'https://img0.baidu.com/it/u=3902947011,207703161&fm=253&app=138&f=JPEG?w=800&h=1455',
			imageAlt: '秋天的风景'
		},
		{
			title: '冬天',
			imageUrl:
				'https://img0.baidu.com/it/u=4091158592,2102354044&fm=253&app=138&f=JPEG?w=800&h=1455',
			imageAlt: '冬天的风景'
		}
	]);

	const handleIntervalChange = (e: React.ChangeEvent<HTMLInputElement>) => {
		const value = parseInt(e.target.value) || 2000;
		setInterval(Math.max(1000, Math.min(10000, value)));
	};

	const handleAddSlide = () => {
		const newSlide = {
			title: `季节 ${customSlides.length + 1}`,
			imageUrl: 'https://q6.itc.cn/q_70/images03/20250116/b5dba16a1f5749a6a375f20f901d6381.png',
			imageAlt: `季节 ${customSlides.length + 1} 的风景`
		};
		setCustomSlides([...customSlides, newSlide]);
	};

	const handleRemoveSlide = () => {
		if (customSlides.length > 1) {
			setCustomSlides(customSlides.slice(0, -1));
		}
	};

	return (
		<div style={{ padding: '20px' }}>
			<h1 style={{ textAlign: 'center', color: '#333', marginBottom: '30px' }}>图片轮播效果演示</h1>

			<div style={{ marginBottom: '30px', textAlign: 'center' }}>
				<h2 style={{ color: '#333', marginBottom: '15px' }}>默认轮播效果</h2>
				<div
					style={{
						display: 'inline-block',
						backgroundColor: '#f0f0f0',
						borderRadius: '8px',
						padding: '20px',
						height: '300px',
						width: '100%'
					}}
				>
					<ImageCarousel />
				</div>
			</div>

			<div style={{ marginBottom: '30px' }}>
				<h2 style={{ color: '#333', marginBottom: '15px' }}>自定义配置轮播</h2>
				<div
					style={{
						display: 'flex',
						flexDirection: 'column',
						alignItems: 'center',
						gap: '20px',
						padding: '20px',
						backgroundColor: '#f0f0f0',
						borderRadius: '8px'
					}}
				>
					<div style={{ display: 'inline-block', height: '300px', width: '100%' }}>
						<ImageCarousel slides={customSlides} autoPlay={autoPlay} interval={interval} />
					</div>

					<div
						style={{
							display: 'flex',
							gap: '20px',
							flexWrap: 'wrap',
							justifyContent: 'center',
							alignItems: 'center'
						}}
					>
						<div>
							<label style={{ marginRight: '10px' }}>自动播放:</label>
							<input
								type="checkbox"
								checked={autoPlay}
								onChange={e => setAutoPlay(e.target.checked)}
							/>
						</div>

						<div>
							<label style={{ marginRight: '10px' }}>间隔时间:</label>
							<input
								type="range"
								min="1000"
								max="10000"
								step="500"
								value={interval}
								onChange={handleIntervalChange}
								style={{ padding: '5px', width: '100px' }}
							/>
							<span style={{ marginLeft: '10px' }}>{interval}ms</span>
						</div>

						<div>
							<button onClick={handleAddSlide} style={{ padding: '5px 10px', marginRight: '10px' }}>
								添加图片
							</button>
							<button onClick={handleRemoveSlide} style={{ padding: '5px 10px' }}>
								删除图片
							</button>
						</div>
					</div>
				</div>
			</div>

			<div
				style={{
					marginTop: '30px',
					padding: '20px',
					backgroundColor: '#f8f9fa',
					borderRadius: '8px',
					boxShadow: '0 2px 8px rgba(0,0,0,0.1)',
					textAlign: 'left',
					maxWidth: '800px',
					margin: '30px auto 0'
				}}
			>
				<h2 style={{ color: '#333', marginBottom: '15px' }}>图片轮播特点</h2>
				<ul style={{ paddingLeft: '20px' }}>
					<li style={{ margin: '10px 0' }}>支持自动播放和手动切换</li>
					<li style={{ margin: '10px 0' }}>可自定义轮播间隔时间</li>
					<li style={{ margin: '10px 0' }}>支持动态添加/删除图片</li>
					<li style={{ margin: '10px 0' }}>带有滑入动画效果</li>
					<li style={{ margin: '10px 0' }}>响应式设计，适配不同屏幕尺寸</li>
					<li style={{ margin: '10px 0' }}>使用TypeScript编写，具有完整的类型定义</li>
				</ul>

				<h3 style={{ color: '#333', marginTop: '20px', marginBottom: '10px' }}>使用说明</h3>
				<p>
					图片轮播组件通过滑入动画展示图片，用户可以通过底部的指示点手动切换图片，
					也可以设置自动播放。组件支持自定义图片数据、播放间隔等配置。
				</p>
				<p style={{ marginTop: '10px' }}>
					<strong>Props说明：</strong>
					<br />
					• slides: 图片数据数组，默认包含3张示例图片
					<br />
					• autoPlay: 是否自动播放，默认为true
					<br />
					• interval: 轮播间隔时间(毫秒)，默认为2000ms
					<br />
					• className: 自定义CSS类名
					<br />• style: 自定义内联样式
				</p>
			</div>
		</div>
	);
};

export default ImageCarouselExample;
```

## 使用说明

### 基本使用

```tsx
import ImageCarousel from './effects/ImageCarousel';

function App() {
	return (
		<div style={{ height: '100vh' }}>
			<ImageCarousel />
		</div>
	);
}
```

### 自定义配置

```tsx
import ImageCarousel from './effects/ImageCarousel';

const customSlides = [
	{
		title: '自定义标题1',
		imageUrl: 'path/to/image1.jpg',
		imageAlt: '图片描述1'
	},
	{
		title: '自定义标题2',
		imageUrl: 'path/to/image2.jpg',
		imageAlt: '图片描述2'
	}
];

function App() {
	return (
		<div style={{ height: '100vh' }}>
			<ImageCarousel slides={customSlides} autoPlay={false} interval={3000} />
		</div>
	);
}
```

## 实现原理

### 1. 组件结构

图片轮播组件主要由以下几个部分组成：

1. **外层容器**：负责设置背景和整体布局
2. **卡片容器**：包含内容区域和图片区域
3. **内容区域**：显示当前图片的标题
4. **图片区域**：显示当前图片
5. **指示点容器**：包含多个指示点，用于切换图片

### 2. 动画效果

通过 CSS `@keyframes` 定义滑入动画：

```css
@keyframes slidein {
	from {
		transform: translateX(-3000px);
	}
	to {
		transform: translateX(0);
	}
}
```

当切换图片时，给图片元素添加 `slide-animation` 类触发动画。

### 3. 自动播放

使用 `useEffect` 和 `setInterval` 实现自动播放功能：

```tsx
useEffect(() => {
	let intervalId: NodeJS.Timeout | null = null;

	if (autoPlay) {
		intervalId = setInterval(() => {
			nextSlide();
		}, interval);
	}

	return () => {
		if (intervalId) {
			clearInterval(intervalId);
		}
	};
}, [autoPlay, interval, slides.length]);
```

### 4. 指示点切换

通过映射图片数组生成指示点，并根据当前图片索引设置活动状态：

```tsx
{
	slides.map((_, index) => (
		<span
			key={index}
			className={`dot ${index === current ? 'active' : ''}`}
			onClick={() => goToSlide(index)}
		/>
	));
}
```

## 优化建议

### 1. 性能优化

- 使用 `useState` 和 `useEffect` 管理状态和副作用
- 通过条件判断避免不必要的状态更新
- 使用 CSS 动画而非 JavaScript 动画以获得更好的性能

### 2. 用户体验优化

- 添加动画状态控制，防止用户频繁点击导致的动画冲突
- 提供更丰富的配置选项，如动画时长、切换方向等
- 增加键盘导航支持

### 3. 响应式设计

```css
@media (width >=48rem) {
	#title {
		font-size: 2rem;
	}
}
```

通过媒体查询适配不同屏幕尺寸。
IE 10+

## 结语

图片轮播效果通过 React 组件化和 CSS 动画技术，实现了流畅的图片切换体验。该组件不仅具有良好的视觉效果，还提供了丰富的配置选项，可以根据实际需求进行定制。通过合理的优化和自定义配置，可以将其应用于各种场景，如产品展示、图片画廊等。
