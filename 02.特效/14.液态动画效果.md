---
title: 液态动画效果
date: 2025-09-30
permalink: /special-effects/liquid-animation
categories:
  - 特效
tags:
  - react
  - css
  - 动画
  - 液态效果
---

# 液态动画效果

## 简介

液态动画效果是一种模拟液体流动特性的动画技术，通过 CSS 变量和关键帧动画实现。该效果具有自然的形态变化和流动感，适用于按钮、进度条、背景等多种 UI 元素。

## 效果演示

<demo react="react/effects/LiquidAnimation/example.tsx" 
:reactFiles="['react/effects/LiquidAnimation/example.tsx', 'react/effects/LiquidAnimation/index.tsx','react/effects/LiquidAnimation/index.scss']" />

## 核心实现原理

### CSS 变量驱动

液态动画的核心是 CSS 变量的灵活运用，通过变量控制动画的各个方面：

1. **基础参数**：定义颜色、尺寸、动画时长等基础变量
2. **嵌套计算**：通过`calc()`实现变量间的依赖关系
3. **动态修改**：支持 JS 或伪类动态修改变量值

```css
:root {
	/* 基础参数 */
	--liquid-base-size: 100px;
	--liquid-color-primary: #4a90e2;
	--liquid-animation-duration: 2s;

	/* 嵌套计算 */
	--liquid-ripple-radius: calc(var(--liquid-base-size) * 1.5);

	/* 动态参数 */
	--liquid-opacity: 0.8;
	--liquid-blur: 8px;
}
```

### 关键帧动画设计

液态动画通过精心设计的`@keyframes`实现自然的流动效果：

1. **形态变化**：通过改变`border-radius`模拟液体的不规则变形
2. **位置流动**：结合`transform: translate`实现细微的位置偏移
3. **光泽动态**：调整渐变角度和背景位置模拟光线反射

```css
@keyframes liquid-shape {
	0% {
		border-radius: 42% 58% 70% 30% / 45% 45% 55% 55%;
		background: linear-gradient(135deg, var(--liquid-color-primary), var(--liquid-color-secondary));
	}
	25% {
		border-radius: 38% 62% 50% 50% / 60% 30% 70% 40%;
		background: linear-gradient(160deg, var(--liquid-color-primary), var(--liquid-color-secondary));
	}
	50% {
		border-radius: 55% 45% 35% 65% / 55% 60% 40% 45%;
		background: linear-gradient(190deg, var(--liquid-color-primary), var(--liquid-color-secondary));
	}
	75% {
		border-radius: 60% 40% 70% 30% / 40% 55% 45% 60%;
		background: linear-gradient(220deg, var(--liquid-color-primary), var(--liquid-color-secondary));
	}
	100% {
		border-radius: 42% 58% 70% 30% / 45% 45% 55% 55%;
		background: linear-gradient(135deg, var(--liquid-color-primary), var(--liquid-color-secondary));
	}
}
```

## 核心实现

### 1. 液态按钮组件

```tsx
import React from 'react';
import './index.scss';

interface LiquidButtonProps {
	children?: React.ReactNode;
	className?: string;
	style?: React.CSSProperties;
	onClick?: () => void;
}

const LiquidButton: React.FC<LiquidButtonProps> = ({
	children = '液态按钮',
	className = '',
	style = {},
	onClick
}) => {
	return (
		<button className={`liquid-button ${className}`} style={style} onClick={onClick}>
			<span className="liquid-button__text">{children}</span>
			<span className="liquid-button__ripple"></span>
			<span className="liquid-button__wave"></span>
		</button>
	);
};

export default LiquidButton;
```

### 2. 样式实现

```scss
.liquid-button {
	position: relative;
	padding: 12px 24px;
	background: var(--liquid-btn-bg, #4a90e2);
	color: white;
	border: none;
	border-radius: 8px;
	font-size: 16px;
	font-weight: 600;
	cursor: pointer;
	overflow: hidden;
	transition: all 0.3s ease;
	width: 200px;
	height: 50px;

	// 液态波动效果
	&::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
		transform: translateX(-100%);
		transition: transform 0.6s ease;
	}

	&:hover {
		&::before {
			transform: translateX(100%);
		}

		.liquid-button__wave {
			animation: liquid-wave 2s ease-in-out infinite alternate;
		}
	}

	&:active {
		transform: scale(0.95);
	}

	&__text {
		position: relative;
		z-index: 2;
	}

	// 水波纹效果
	&__ripple {
		position: absolute;
		top: 50%;
		left: 50%;
		width: 0;
		height: 0;
		border-radius: 50%;
		background: rgba(255, 255, 255, 0.6);
		transform: translate(-50%, -50%);
		transition: width 0.6s, height 0.6s;
		z-index: 1;
	}

	// 液态波动层
	&__wave {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		border-radius: 8px;
		background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.3));
		z-index: 0;
	}

	// 液态形态变化动画
	@keyframes liquid-wave {
		0% {
			border-radius: 45% 55% 60% 40% / 50% 45% 55% 50%;
		}
		100% {
			border-radius: 55% 45% 40% 60% / 55% 50% 45% 50%;
		}
	}
}
```

### 3. 示例组件

```tsx
import React, { useState } from 'react';
import LiquidButton from './index';
import './index.scss';

const LiquidAnimationExample: React.FC = () => {
	const [clickCount, setClickCount] = useState(0);

	const handleClick = () => {
		setClickCount(prev => prev + 1);
	};

	return (
		<div className="liquid-animation-demo">
			<h2>液态动画效果演示</h2>

			<div className="demo-section">
				<h3>基础液态按钮</h3>
				<LiquidButton onClick={handleClick}>点击次数: {clickCount}</LiquidButton>
			</div>

			<div className="demo-section">
				<h3>自定义样式按钮</h3>
				<LiquidButton
					className="custom-liquid-button"
					style={
						{
							'--liquid-btn-bg': '#e74c3c'
						} as React.CSSProperties
					}
					onClick={handleClick}
				>
					红色主题
				</LiquidButton>
			</div>

			<div className="demo-section">
				<h3>不同尺寸按钮</h3>
				<div className="button-group">
					<LiquidButton
						className="small-button"
						style={{ width: '120px', height: '35px', fontSize: '14px' }}
					>
						小按钮
					</LiquidButton>
					<LiquidButton
						className="large-button"
						style={{ width: '250px', height: '60px', fontSize: '18px' }}
					>
						大按钮
					</LiquidButton>
				</div>
			</div>

			<div className="demo-info">
				<h3>液态动画特点</h3>
				<ul>
					<li>通过CSS变量实现参数化控制</li>
					<li>利用关键帧动画模拟液体流动效果</li>
					<li>支持动态交互反馈</li>
					<li>可自定义颜色、尺寸等属性</li>
					<li>性能优化，使用硬件加速属性</li>
				</ul>
			</div>
		</div>
	);
};

export default LiquidAnimationExample;
```

## 参数配置说明

### LiquidButton 组件 Props

| 参数      | 类型                | 默认值     | 说明            |
| --------- | ------------------- | ---------- | --------------- |
| children  | React.ReactNode     | '液态按钮' | 按钮显示文本    |
| className | string              | ''         | 自定义 CSS 类名 |
| style     | React.CSSProperties | {}         | 自定义内联样式  |
| onClick   | () => void          | undefined  | 点击事件回调    |

### CSS 变量配置

| 变量名                      | 默认值  | 说明         |
| --------------------------- | ------- | ------------ |
| --liquid-btn-bg             | #4a90e2 | 按钮背景色   |
| --liquid-animation-duration | 2s      | 动画持续时间 |
| --liquid-btn-radius         | 8px     | 按钮圆角大小 |

## 使用示例

### 基础使用

```tsx
import LiquidButton from './effects/LiquidAnimation';

function App() {
	return (
		<div>
			<LiquidButton>点击我</LiquidButton>
		</div>
	);
}
```

### 自定义样式

```tsx
import LiquidButton from './effects/LiquidAnimation';

function App() {
	return (
		<div>
			<LiquidButton
				style={
					{
						'--liquid-btn-bg': '#e74c3c',
						width: '200px',
						height: '50px'
					} as React.CSSProperties
				}
			>
				自定义按钮
			</LiquidButton>
		</div>
	);
}
```

## 实现细节

### 1. 液态形态变化

通过 CSS 关键帧动画实现按钮边缘的液态波动效果：

```css
@keyframes liquid-wave {
	0% {
		border-radius: 45% 55% 60% 40% / 50% 45% 55% 50%;
	}
	100% {
		border-radius: 55% 45% 40% 60% / 55% 50% 45% 50%;
	}
}
```

### 2. 光泽流动效果

使用伪元素创建光泽流动效果，增强液态感：

```css
&::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
	transform: translateX(-100%);
	transition: transform 0.6s ease;
}

&:hover::before {
	transform: translateX(100%);
}
```

### 3. 交互反馈

通过`:active`伪类实现按钮按下时的缩放效果，增强交互体验：

```css
&:active {
	transform: scale(0.95);
}
```

## 性能优化

1. **硬件加速**：使用`transform`和`opacity`属性触发硬件加速
2. **动画优化**：合理使用`will-change`属性提示浏览器优化
3. **事件节流**：避免频繁触发动画效果
4. **CSS 变量**：通过 CSS 变量减少重复样式代码

## 应用场景

1. **按钮交互**：增强按钮点击反馈效果
2. **进度指示**：创建液态进度条组件
3. **背景效果**：实现液态背景流动效果
4. **卡片组件**：为卡片添加液态 hover 效果
5. **加载动画**：创建液态加载指示器

## 总结

液态动画效果通过 CSS 变量和关键帧动画技术，实现了自然流畅的液体流动效果。该效果不仅视觉上吸引人，还能增强用户交互体验。通过合理的参数配置和样式定制，可以适应各种 UI 设计需求。
