---
title: framer-motion åŠ¨ç”»åº“
permalink: /notes/åŠ¨ç”»åº“
categories:
  - ç¬”è®°
tags:
  - åŠ¨ç”»åº“
  - framer-motion
---

# Framer Motion åŠ¨ç”»åº“

Framer Motion æ˜¯ä¸€ä¸ªä¸º React è®¾è®¡çš„ç”Ÿäº§çº§åŠ¨ç”»åº“ï¼Œæä¾›äº†ç®€æ´çš„ API å’Œå¼ºå¤§çš„åŠ¨ç”»åŠŸèƒ½ã€‚å®ƒè®©å¤æ‚çš„åŠ¨ç”»å˜å¾—ç®€å•ï¼ŒåŒæ—¶ä¿æŒäº†å‡ºè‰²çš„æ€§èƒ½ã€‚

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

- **å£°æ˜å¼ API**: é€šè¿‡ç®€å•çš„ props å®šä¹‰å¤æ‚åŠ¨ç”»
- **æ‰‹åŠ¿æ”¯æŒ**: å†…ç½®æ‹–æ‹½ã€ç‚¹å‡»ã€æ‚¬åœç­‰æ‰‹åŠ¿è¯†åˆ«
- **å¸ƒå±€åŠ¨ç”»**: è‡ªåŠ¨å¤„ç†å¸ƒå±€å˜åŒ–çš„åŠ¨ç”»
- **SVG æ”¯æŒ**: å®Œæ•´çš„ SVG è·¯å¾„å’Œå½¢çŠ¶åŠ¨ç”»
- **æœåŠ¡ç«¯æ¸²æŸ“**: æ”¯æŒ SSR å’Œé™æ€ç”Ÿæˆ
- **TypeScript**: å®Œæ•´çš„ç±»å‹æ”¯æŒ

## ğŸ“¦ å®‰è£…

```bash
npm install framer-motion
# æˆ–
yarn add framer-motion
```

## ğŸ¯ åŸºç¡€ç”¨æ³•

### åŸºç¡€åŠ¨ç”»ç¤ºä¾‹

<demo react="react/Animate/FramerMotion/index.tsx" :reactFiles='["react/Animate/FramerMotion/index.tsx"]' />

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- `motion.div`: å¯åŠ¨ç”»çš„ HTML å…ƒç´ 
- `initial`: åˆå§‹çŠ¶æ€
- `animate`: ç›®æ ‡çŠ¶æ€
- `transition`: åŠ¨ç”»è¿‡æ¸¡é…ç½®

### é«˜çº§åŠ¨ç”»æ•ˆæœ

<demo react="react/Animate/FramerMotion/framer.tsx" :reactFiles='["react/Animate/FramerMotion/framer.tsx","react/Animate/FramerMotion/framer.scss"]' />

## ğŸ¨ æ ¸å¿ƒ API

### motion ç»„ä»¶

```jsx
import { motion } from 'framer-motion'

// åŸºç¡€ç”¨æ³•
<motion.div
  initial={{ opacity: 0 }}
  animate={{ opacity: 1 }}
  transition={{ duration: 0.5 }}
>
  å†…å®¹
</motion.div>
```

### åŠ¨ç”»å±æ€§

#### å˜æ¢å±æ€§ (Transform)
- `x`, `y`, `z`: ä½ç§»
- `scale`, `scaleX`, `scaleY`: ç¼©æ”¾
- `rotate`, `rotateX`, `rotateY`, `rotateZ`: æ—‹è½¬
- `skew`, `skewX`, `skewY`: å€¾æ–œ

#### æ ·å¼å±æ€§ (Style)
- `opacity`: é€æ˜åº¦
- `backgroundColor`: èƒŒæ™¯è‰²
- `color`: æ–‡å­—é¢œè‰²
- `width`, `height`: å°ºå¯¸
- `borderRadius`: åœ†è§’

#### SVG å±æ€§
- `pathLength`: è·¯å¾„é•¿åº¦
- `pathOffset`: è·¯å¾„åç§»
- `fill`, `stroke`: å¡«å……å’Œæè¾¹

### æ‰‹åŠ¿äº‹ä»¶

```jsx
<motion.div
  whileHover={{ scale: 1.1 }}
  whileTap={{ scale: 0.9 }}
  whileDrag={{ rotate: 90 }}
  drag
  dragConstraints={{ left: 0, right: 300, top: 0, bottom: 300 }}
>
  å¯äº¤äº’å…ƒç´ 
</motion.div>
```

### å˜ä½“ (Variants)

```jsx
const variants = {
  hidden: { opacity: 0, y: 50 },
  visible: { 
    opacity: 1, 
    y: 0,
    transition: { duration: 0.5 }
  }
}

<motion.div
  variants={variants}
  initial="hidden"
  animate="visible"
>
  å†…å®¹
</motion.div>
```

## ğŸ­ é«˜çº§åŠŸèƒ½

### å¸ƒå±€åŠ¨ç”»

```jsx
<motion.div layout>
  å†…å®¹å˜åŒ–æ—¶è‡ªåŠ¨åŠ¨ç”»
</motion.div>
```

### å…±äº«å¸ƒå±€åŠ¨ç”»

```jsx
<motion.div layoutId="shared-element">
  åœ¨ä¸åŒä½ç½®é—´å¹³æ»‘è¿‡æ¸¡
</motion.div>
```

### é¡µé¢è¿‡æ¸¡

```jsx
import { AnimatePresence } from 'framer-motion'

<AnimatePresence>
  {isVisible && (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      exit={{ opacity: 0 }}
    >
      æ¡ä»¶æ¸²æŸ“çš„å†…å®¹
    </motion.div>
  )}
</AnimatePresence>
```

### æ»šåŠ¨è§¦å‘åŠ¨ç”»

```jsx
import { useInView } from 'framer-motion'

const ref = useRef(null)
const isInView = useInView(ref)

<motion.div
  ref={ref}
  animate={isInView ? { opacity: 1, y: 0 } : { opacity: 0, y: 100 }}
>
  æ»šåŠ¨åˆ°è§†å£æ—¶åŠ¨ç”»
</motion.div>
```

## ğŸ› ï¸ å®ç”¨ Hooks

### useAnimation

```jsx
import { useAnimation } from 'framer-motion'

const controls = useAnimation()

const startAnimation = () => {
  controls.start({ x: 100, transition: { duration: 2 } })
}

<motion.div animate={controls} />
```

### useMotionValue

```jsx
import { useMotionValue, useTransform } from 'framer-motion'

const x = useMotionValue(0)
const opacity = useTransform(x, [-100, 0, 100], [0, 1, 0])

<motion.div drag="x" style={{ x, opacity }} />
```

### useSpring

```jsx
import { useSpring } from 'framer-motion'

const x = useSpring(0, { stiffness: 300, damping: 30 })

// æ›´æ–°å€¼æ—¶ä¼šæœ‰å¼¹æ€§åŠ¨ç”»
x.set(100)
```

## ğŸ¯ æœ€ä½³å®è·µ

### æ€§èƒ½ä¼˜åŒ–

1. **ä½¿ç”¨ transform å±æ€§**: ä¼˜å…ˆä½¿ç”¨ `x`, `y`, `scale`, `rotate` ç­‰ transform å±æ€§
2. **é¿å…å¸ƒå±€å±æ€§**: å°½é‡é¿å…åŠ¨ç”» `width`, `height`, `top`, `left` ç­‰ä¼šè§¦å‘é‡æ’çš„å±æ€§
3. **ä½¿ç”¨ will-change**: å¯¹äºå¤æ‚åŠ¨ç”»ï¼Œæ·»åŠ  `will-change` æç¤ºæµè§ˆå™¨ä¼˜åŒ–
4. **åˆç†ä½¿ç”¨ layoutId**: åªåœ¨å¿…è¦æ—¶ä½¿ç”¨å…±äº«å¸ƒå±€åŠ¨ç”»

### ç”¨æˆ·ä½“éªŒ

1. **å°Šé‡ç”¨æˆ·åå¥½**: æ£€æŸ¥ `prefers-reduced-motion` è®¾ç½®
2. **åˆç†çš„åŠ¨ç”»æ—¶é•¿**: é€šå¸¸ 0.2-0.5 ç§’æ¯”è¾ƒåˆé€‚
3. **ç¼“åŠ¨å‡½æ•°**: ä½¿ç”¨è‡ªç„¶çš„ç¼“åŠ¨æ•ˆæœï¼Œå¦‚ `ease-out`
4. **æä¾›åé¦ˆ**: äº¤äº’æ—¶æä¾›è§†è§‰åé¦ˆ

### ä»£ç ç»„ç»‡

1. **æŠ½å–å˜ä½“**: å°†å¤æ‚çš„åŠ¨ç”»é…ç½®æŠ½å–ä¸ºå˜ä½“
2. **è‡ªå®šä¹‰ Hook**: å°è£…å¸¸ç”¨çš„åŠ¨ç”»é€»è¾‘
3. **ç»„ä»¶åŒ–**: åˆ›å»ºå¯å¤ç”¨çš„åŠ¨ç”»ç»„ä»¶
4. **ç±»å‹å®‰å…¨**: å……åˆ†åˆ©ç”¨ TypeScript ç±»å‹

## ğŸ¨ å¸¸è§åŠ¨ç”»æ¨¡å¼

### æ·¡å…¥æ·¡å‡º

```jsx
const fadeIn = {
  initial: { opacity: 0 },
  animate: { opacity: 1 },
  exit: { opacity: 0 }
}
```

### æ»‘åŠ¨è¿›å…¥

```jsx
const slideIn = {
  initial: { x: -100, opacity: 0 },
  animate: { x: 0, opacity: 1 },
  exit: { x: 100, opacity: 0 }
}
```

### å¼¹æ€§ç¼©æ”¾

```jsx
const scaleIn = {
  initial: { scale: 0 },
  animate: { scale: 1 },
  transition: { type: "spring", stiffness: 300, damping: 20 }
}
```

### åˆ—è¡¨åŠ¨ç”»

```jsx
const container = {
  hidden: { opacity: 1, scale: 0 },
  visible: {
    opacity: 1,
    scale: 1,
    transition: {
      delayChildren: 0.3,
      staggerChildren: 0.2
    }
  }
}

const item = {
  hidden: { y: 20, opacity: 0 },
  visible: { y: 0, opacity: 1 }
}
```

## ğŸ”§ è°ƒè¯•æŠ€å·§

### å¼€å‘å·¥å…·

1. **Framer Motion DevTools**: æµè§ˆå™¨æ‰©å±•ï¼Œå¯è§†åŒ–åŠ¨ç”»çŠ¶æ€
2. **React DevTools**: æŸ¥çœ‹ç»„ä»¶çŠ¶æ€å’Œ props
3. **Performance é¢æ¿**: åˆ†æåŠ¨ç”»æ€§èƒ½

### å¸¸è§é—®é¢˜

1. **åŠ¨ç”»ä¸æµç•…**: æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†ä¼šè§¦å‘é‡æ’çš„å±æ€§
2. **å†…å­˜æ³„æ¼**: ç¡®ä¿åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…ç†åŠ¨ç”»
3. **SSR é—®é¢˜**: ä½¿ç”¨ `LazyMotion` å‡å°‘æœåŠ¡ç«¯åŒ…å¤§å°

## ğŸ“š å­¦ä¹ èµ„æº

- **å®˜æ–¹æ–‡æ¡£**: https://www.framer.com/motion/
- **ç¤ºä¾‹é›†åˆ**: https://www.framer.com/motion/examples/
- **ç¤¾åŒºèµ„æº**: GitHubã€CodeSandbox ä¸Šçš„ç¤ºä¾‹é¡¹ç›®

---

*Framer Motion è®©åŠ¨ç”»å¼€å‘å˜å¾—ç®€å•è€Œå¼ºå¤§ï¼Œé€šè¿‡åˆç†ä½¿ç”¨å¯ä»¥åˆ›é€ å‡ºä»¤äººå°è±¡æ·±åˆ»çš„ç”¨æˆ·ä½“éªŒã€‚*
