---
title: Svg入门示例
date: 2025-07-18 19:18:00
permalink: /notes/svg-en-demo
description: Svg入门示例
categories:
  - 笔记
  - 时钟
tags:
  - JS
  - Svg
---

# 1、SVG 是什么?

- SVG 意为可缩放矢量图形（Scalable Vector Graphics）。
- SVG 是使用 XML 来描述二维图形和绘图程序的语言。
- SVG 图像在放大或改变尺寸的情况下其图形质量不会有所损失。
- SVG 是万维网联盟的标准。

# 2、SVG 的优势

与其他图像格式相比（比如 JPEG 和 GIF），使用 SVG 的优势在于：

- SVG 图像可通过文本编辑器来创建和修改；
- SVG 图像可被搜索、索引、脚本化或压缩；
- SVG 是可伸缩的；
- SVG 图像可在任何的分辨率下被高质量地打印；
- SVG 可在图像质量不下降的情况下被放大；

> 坐标系与我们的 canvas 基本类似
> ![](http://tva1.sinaimg.cn/large/69abf49bly1gxutkbnafij2064064aa4.jpg)

M = moveto
L = lineto
H = horizontal lineto
V = vertical lineto
C = curveto
S = smooth curveto
Q = quadratic Bézier curve
T = smooth quadratic Bézier curveto
A = elliptical Arc
Z = closepath

注意：以上所有命令均允许小写字母。大写表示绝对定位，小写表示相对定位。

## 1. 创建 SVG

SVG 文档基本结构：

```html
<svg width="180" heiight="170" xmlns="http://wwww.w3.org/2000/svg">
	<title>SVG</title>
	<desc>关于SVG的描述</desc>
	<!-- 在这里绘制图像 -->
</svg>
```

1. `<svg>` 以像素为单位定义了整个图像的 width 和 height，还通过 xmlns 属性定义了 SVG 的命名空间。
2. `<title>` 元素的内容可以被阅读器显示在标题栏上或者是作为鼠标指针指向图像时的提示。
3. `<desc>` 元素允许咱们为图像定义完整的描述信息。
   如果只想展示 SVG 图像的一部分，就要指定 viewBox 属性

<demo react="react/SvgDemo/components/SvgViewBox.tsx" 
:reactFiles="['react/SvgDemo/components/SvgViewBox.tsx']" 
/>

### 复杂 SVG 动画示例

下面是一个复杂的 SVG 动画图标示例，展示了 SVG 的强大功能：

<demo react="react/SvgDemo/components/SvgAnimatedIcon.tsx" 
:reactFiles="['react/SvgDemo/components/SvgAnimatedIcon.tsx']" 
/>

## 2. 基本图形与基本属性

1. 图形: `<rect>`、`<circle>`、`<ellipse>`、`<line>`、`<polyline>`、`<polygon>`、`<path>`

2. 属性: `fill`、`stroke`、`stroke-width`、`transform`等

- `fill` 填充的颜色（对于动画元素，该属性是定义动画结束时的状态，可以是 `remove`（默认值）或 `freeze`）
- `fill-opacity` 设置填充颜色的透明度
- `stroke` 设置图形元素的外轮廓的颜色，默认值是 `none` 不显示外轮廓，可以设置为颜色，也可以引用[渐变](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke#example")
- `stroke-opacity` 设置外轮廓的颜色的透明度
- `stroke-width` 设置外轮廓的宽度
- `stroke-dasharray` 设置[描边的点划线的图案规则](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray")，可以是有一个或两个（用逗号分隔）或多个数字指定短划线和缺口的长度（奇数和偶数的组合可以构成不一样的规律）
- `stroke-linecap` 对于闭合的的路径，设置描边两端的形状，可以设置为无线帽 `butt`（默认值）、圆角`round`、直角 `square` 或 `inherit`
- `stroke-linejoin` 设置路径的转角处的处理方式，可以设置为 `arcs` 、 `bevel` 、`miter` 、 `miter-clip` 或 `round`
- `paint-order` 设置图形的填充 `fill`、描边 `stroke` 和标记 `markers` 的[绘制顺序](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/paint-order")，默认顺序是 `fill stroke markers`，如果属性值省略其他参数，先按照列出的参数绘制，最后再按照省略参数原有的顺序绘制
- `pointer-events` 定义元素是否或何时[可响应鼠标事件](https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/pointer-events)
- `tabindex` 控制元素是否可聚焦（通过 Tab 键切换选中），并定义元素的相对顺序，以便进行顺序聚焦导航
- `visibility` 控制一个图形元素的可见性，设置为 `hidden` 或 `collapse` 当前的图形元素将不可见，但可能依然能够响应 `pointer-events` 事件。对于文字元素 `<tspan>`、`<tref>` 设置为 `hidden`，则文本变得不可见**但是依然占用文本布局计算的空间**

## 3. 矩形 rect

使用元素 `<rect/>` 绘制一个矩形，可以通过 6 个基本属性控制其位置和形状：

- `x` 矩形左上角在画布中的 x 位置
- `y` 矩形左上角在画布中的 y 位置
- `width` 矩形的宽度
- `height` 矩形的高度
- `rx` 矩形的圆角 x 方向的半径，默认为 `0`
- `ry` 矩形的圆角 y 方向的半径，默认为 `0`

<demo react="react/SvgDemo/components/SvgRectangle.tsx" 
:reactFiles="['react/SvgDemo/components/SvgRectangle.tsx']" 
/>

## 4. 圆形和椭圆 circle ellipse

### 1. `<circle/>` 绘制一个圆形

通过 3 个属性来设置圆形：

- `r` 圆形的半径
- `cx` 圆心在画布中的 x 位置
- `cy` 圆心在画布中的 y 位置

#### 2. `<ellipse/>` 绘制一个椭圆

它是圆形更通用的形式，与圆形元素相比增加了 `rx` 和 `ry` 属性，以设置椭圆的 x 半径 和 y 半径（即长轴半径和短轴半径）：

- `cx` 椭圆心在画布中的 x 位置
- `cy` 椭圆心在画布中的 y 位置
- `rx` 椭圆的 x 半径
- `ry` 椭圆的 y 半径

> 元素 `<ellipse/>` 不能设置方向，例如要画一个 45 度角倾斜的椭圆，可以利用 [`transform` 属性](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform)实现旋转。

<demo react="react/SvgDemo/components/SvgCircleEllipse.tsx" 
:reactFiles="['react/SvgDemo/components/SvgCircleEllipse.tsx']" 
/>

## 5. 线条和折线

### 1. `<line/>` 绘制一条直线

通过指定起点和终点的位置即可：

- `x1` 起点的 x 位置
- `y1` 起点的 y 位置
- `x2` 终点的 x 位置
- `y2` 终点的 y 位置

### 2. `<polyline/>` 绘制折线

由于折线是通过许多点构成的，因此需要设置**多对点及数列** `points` 设置点集数列。
每对点必须包含 2 个数字，分别表示 `x` 坐标和 `y` 坐标，数字间用空格分隔；每对点用逗号隔开。

<demo react="react/SvgDemo/components/SvgLinePolyline.tsx" 
:reactFiles="['react/SvgDemo/components/SvgLinePolyline.tsx']" 
/>

## 6. 多边形

### `<polygon/>` 绘制多边形。

多边形可以当作由多条折线构成的**闭合图形**，也是由点集数列组成 `points` 设置点集数列。其中路径在最后一个点会自动绘制一条直线回到第一个点。

其中属性 `fill-rule` 定义多边形不同的算法填充方式不同，可以设置为 `nonzero`（默认值）或 `evenodd`

<demo react="react/SvgDemo/components/SvgPolygon.tsx" 
:reactFiles="['react/SvgDemo/components/SvgPolygon.tsx']" 
/>

## 7 路径(重点)

> p 前面的不是很重要
> `<path>` 可以绘制线条、曲线、弧形等图形，是 SVG 形状中最强大的一个，可以通过路径 path 绘制出复杂的图形。

**其关键参数是 `d`：用来设置一个「命令+参数」的集合描述/定义 _define_ 如何绘制路径。** 其中每一个命令都用一个关键字母表示，如 `M` 命令取自 Move to 表示将点移动到相应的坐标，字母后面是一对点数据 `x, y`，表示 x 和 y 轴坐标参数。

- `M x,y` M 表示 **Move To** 移动，其作用就像是把绘画笔从画纸处提起，然后移动到指定的点 (x, y) 该过程不会画出线（不会生成路径，一般作为开始命令，设置路径的起点）
- `L x,y` L 表示 **Line To** 画直线，其作用是从当前位置点画一条直线到指定的点 (x, y)
- `C x,y x,y x,y` C 表示 **Curve To** 画（三次）贝塞尔曲线 Cubic Bézier Curve

每一个命令都有两种表示方式：

- 用**大写字母**，表示采用绝对定位，操作的定位是基于整个容器的坐标
- 用**小写字母**，表示采用相对定位，操作是基于上一个点的定位，例如 `m 10 10` 从上一个点开始，向上移动 `10px`，向左移动 `10px`

对于表示相对定位的参数，一般使用 `d` 作为前缀

### 1. 绘制线条

![svg1.png](http://tva1.sinaimg.cn/large/69abf49bly1gxuub8649zj21ds09wdh2.jpg)

- `M` 命令 `M x,y` 取自 Move to 表示移动画笔，它需要两个参数指定移动的目标坐标，但并不会在当前点与目标点之间画线。类似地 `m dx dy` 表示在相对坐标下的移动
- `L` 命令 `L x,y` 取自 Line to 表示在当前位置和目标位置之间画一条线段，它需要两个参数指定目标坐标。类似地 `l dx dy` 表示在相对坐标下的移动。
- `H` 命令 `H x` 取自 Horizontal 表示绘制一条水平线至水平位置 x。类似地 `h dx` 表示在相对坐标下的移动
- `V` 命令 `V y` 取自 Vertical 表示绘制一条垂直线至垂直位置 y。类似地 `v dy` 表示在相对坐标下的移动
- `Z` 简化 `<path>` 命令，该命令会从当前点画一条直线到路径的起点，实现闭合路径的作用。尽管我们不总是需要闭合路径，但是它还是经常被放到路径的最后。

<demo react="react/SvgDemo/components/SvgPathBasic.tsx" 
:reactFiles="['react/SvgDemo/components/SvgPathBasic.tsx']" 
/>

### 2. 贝塞尔曲线

![svg2.png](http://tva1.sinaimg.cn/large/69abf49bly1gxuubxf2edj21d60meady.jpg)

- 贝塞尔曲线 Bézier curve 有三种，线性贝塞尔曲线 Linear Bézier curves、二次贝塞尔曲线 Quadratic Bézier curve、三次贝塞尔曲线 Cubic Bézier curve，第一种只是生成直线，第二、第三种才能生成曲线。

- 二次贝塞尔曲线 Quadratic Bézier curve：使用 `Q` 命令 `Q x1,y1 x,y` 绘制。它只有两组参数点，因为只需要一个控制点，用来确定起点和终点的曲线斜率。

<demo react="react/SvgDemo/components/SvgQuadraticBezier.tsx" 
:reactFiles="['react/SvgDemo/components/SvgQuadraticBezier.tsx']" 
/>

- 简写命令 `T` 只定义新曲线的终点（然后结合前一个控制点自动推断出新的控制点）延长二次贝塞尔曲线 `T x, y`（只定义终点）
  如果 `T` 命令单独使用（即前面没有 `Q` 命令或 `T` 命令），那么新控制点就会被认为和新的终点是同一个点，所以画出来的将是一条直线。

<demo react="react/SvgDemo/components/SvgQuadraticBezierSmooth.tsx" 
:reactFiles="['react/SvgDemo/components/SvgQuadraticBezierSmooth.tsx']" 
/>

- 三次贝塞尔曲线 Cubic Bézier curve：使用 `C` 命令 `C x1,y1 x2,y2 x,y` 绘制，其中三组坐标参数中前两者表示两个控制点（`(x1,y1) `是起点的控制点，`(x2,y2)` 是终点的控制点），最后一个坐标 `(x,y)` 表示的是曲线的终点。类似地可以使用 `c dx1,dy1 dx2,dy2 dx,dy` 以相对坐标绘制曲线。

<demo react="react/SvgDemo/components/SvgCubicBezier.tsx" 
:reactFiles="['react/SvgDemo/components/SvgCubicBezier.tsx']" 
/>

- 简写命令 `S` 创建第一个控制点与前面斜率相同的（即新曲线的起点是它的第一个控制点与之前曲线的第二个控制点的对称中心）贝塞尔曲线` S x2,y2 x,y`（只定义第二个控制点和终点）
  如果` S` 命令单独使用，前面没有 `C` 命令或者另一个 `S` 命令，那么它的两个控制点就会被假设为**同一个点**。

<demo react="react/SvgDemo/components/SvgCubicBezierSmooth.tsx" 
:reactFiles="['react/SvgDemo/components/SvgCubicBezierSmooth.tsx']" 
/>

### 3. 弧形

弧形 Arc curve：使用 `A` 命令绘制弧形。基本上，弧形可以视为圆形或椭圆形的一部分。

`A rx ry x-axis-rotation large-arc-flag sweep-flag x y`

- `rx` 和 `ry` x 轴半径 和 y 轴半径
- `x-axis-rotation` 弧形的旋转情况
- `large-arc-flag` 角度大小
- `sweep-flag` 弧线方向
- `large-arc-flag` 弧线是大于还是小于 180 度，`0` 表示小角度弧，`1` 表示大角度弧
- `sweep-flag` 表示弧线的方向，`0` 表示从起点到终点沿逆时针画弧，`1` 表示从起点到终点沿顺时针画弧
- `x` 和 `y` 弧线的终点坐标

<demo react="react/SvgDemo/components/SvgArc.tsx" 
:reactFiles="['react/SvgDemo/components/SvgArc.tsx']" 
/>

## 8 文本

### 1. text

`<text>` 定义了**一个由文字组成的矢量图形**，
可以将**渐变、图案、剪切路径、遮罩或者滤镜**应用到文字图形上，可以通过不同属性设置文本的定位、大小、对其方式等。

- `x` 和 `y` 文字在容器中的位置

- `text-anchor` 文本与所给点的对齐方式:

  - 开头 `start`：文本字符串的开始位置对齐给定的点
  - 中间 `middle`：文本字符串的中间位置对齐给定的点
  - 末尾对齐 `end`：文本字符串的末尾对齐给定的点

- `font-size` 字体大小，和一般的 CSS 属性一样

- `word-spacing` 设置两个单词的间隔大小

- `alignment-baseline` 字体相对于它的父元素[对齐方式](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/alignment-baseline#example)

- `baseline-shift` 用以设置基线，让文字作为上标 `sub` 或下标 `super`（但推荐通过 CSS 的[属性 `vertical-align`](https://developer.mozilla.org/en-US/docs/Web/CSS/vertical-align) 来设置）

- `dx` 和 `dy` 设置文字在水平或垂直的方向上的偏移量

- `rotate` 设置**每个字体**的旋转角度

- `textlength` 设置文本长度，文字会相应地进行缩放，[属性 `lengthAdjust`](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/lengthAdjust) 设置文字缩放的方式

- `text-decoration` 它是 CSS [属性 `text-decoration-line`](https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-line) 和[属性 `text-decoration-style`](https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-style) 两个属性的简写，因此它的属性值可以是后两者的属性值的组合，还可以是[属性 `text-decoration-color`](https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-color) 的属性值

如果文字直接出现在 SVG 文档中，却没有用元素 `<text>` 进行包裹，则不会渲染显示。

可以使用元素 `<textPath>` 让文本沿着**指定的路径**放置

<demo react="react/SvgDemo/components/SvgTextPath.tsx" 
:reactFiles="['react/SvgDemo/components/SvgTextPath.tsx']" 
/>

### 2. tspan

`<tspan>` 是一个文本容器，可以为一段文本中某些部分加上不同的样式，可以调整文本和字体的属性，以及文本的位置、绝对或相对坐标值（可设置的属性与元素 `<text>` 类似）。类似于 HTML 的 `<span>` 元素。

- `href` 指定路径
- `method` 文字沿路径呈现的方法，可以设置为 `align` 或 `stretch`
- `path` 直接在元素中设置路径图形
- `side` 在路径哪一侧放置文字，可以设置为 `left`（默认）或 `right`
- `spacing` 文字之间的间隔方式，可以设置为 `auto` 或 `exact`
- `startOffset` 文字距离路径开头多远开始排布，允许使用负值或超出路径总长度的值
- `textLength` 文本的长度

该元素可作为元素 `<text>` 或 `<tspan>` 的子元素

<demo react="react/SvgDemo/components/SvgTextSpan.tsx" 
:reactFiles="['react/SvgDemo/components/SvgTextSpan.tsx']" 
/>

## 9. 绘制任意路径文字

> 和前面一文本效果一样
> 第一步我们先搞到我们想要绘制的路劲 推荐[SVG 编辑器](https://www.nhooo.com/svg-editor/)

<demo react="react/SvgDemo/components/SvgTextPathGradient.tsx" 
:reactFiles="['react/SvgDemo/components/SvgTextPathGradient.tsx']" 
/>

## 10. 补充 svg 动画库

### 1. [BonsaiJS](https://bonsaijs.org/)

> 具有直观的图形 API，是一个基于 SVG 渲染的轻量级图形库；

是创建通用图形（从简单图标到复杂图表）的绝佳选择。它使用关键帧完全控制 SVG 中的路径和动画效果；

除此之外，BonsaiJS 有良好的文档维护，并且还有一些其它惊人的特性。

**特性**

- 支持 HTML5 canvas 和 SVG；
- 运行和渲染在结构上，是分开的；
- 支持关键帧和传统动画；
- 在 Node 环境下运行上下文；
- 适配所有主流浏览器；

```js
bonsai.run(document.body, {
	width: 600,
	height: 600,
	code: function () {
		let url = 'example.svg';
		new Bitmap(url).on('load', function () {
			this.attr('width', 200);
			this.addTo(stage);
			this.animate('3s', {
				x: 200
			});
		});
	}
});
```

这里有一个可供在线编辑的例子 [online editor](https://orbit.bonsaijs.org/)。

### 2. [VivusJS](http://maxwellito.github.io/vivus/)

> [VivusJS](http://maxwellito.github.io/vivus/) 是一个设置 SVG 动画的轻量级 JavaScript 库。

它提供了多种动画选择，还可以根据需要编写脚本来绘制 SVG。此外，VivusJS 没有任何依赖，还有一些其它吸引人的特性。

**特性**

- 提供 3 种主要动画类型：delayed、sync 和 one by one；
- 为 path 和动画提供 5 种计时选项；
- 高性能；
- 允许自定义 SVG.

```html

<svg id="my-svg">
  <path...>
</svg>

<script>
  new Vivus('example.svg', {duration: 200}, myCallback);
</script>

----------------------------------------------------------

<div id="svg-div"></div>
<script>
  new Vivus('svg-div', { duration: 200, file: 'example.svg' }, callback);
</script>

```

### 3. [SVG.js](https://svgjs.dev/docs/3.0/)

> [SVG.js](https://svgjs.dev/docs/3.0/) 是一个操纵 SVG 并设置 SVG 动画的 JS 库。

**特性**
它允许从 3 个不同方面设置 SVG 动画：大小、位置和颜色。与其他动画库相比，SVG.js 简单且轻量，并且具有一些令人兴奋的特性。

```jsx
import { SVG } from '@svgdotjs/svg.js';

let draw = SVG().addTo('body').size(300, 300);

let rect = draw
	.rect(100, 100)
	.animate({
		duration: 2000,
		delay: 1000,
		when: 'now',
		swing: true,
		times: 5,
		wait: 200
	})
	.attr({ fill: '#f06' });
```

### 4. Snap.svg

> [Snap.svg](http://snapsvg.io) 是一个让 SVG 焕然一新的 JS 库。

它支持所有最新的 SVG 功能，如遮罩、剪裁、模式设置和全渐变等；

**特性**

- 支持最新的 SVG 功能；
- 可以在 Illustrator、Inkscape 或 Sketch 中创建 SVG 内容，然后使用 Snap 设置动画；
- 良好的浏览器支持；
- 百分百开源免费；

### 5. Lazy Line Painter

> 用于创建 SVG 路径动画；

[Lazy Line Painter](http://lazylinepainter.info) 与上述库稍有不同，它专门用于路径动画。此外，它还提供了一个名为 Lazy Line Composer 的在线工具，允许您在几秒钟内创建 SVG 动画。

```js
import LazyLinePainter from 'lazy-line-painter';

let el = document.querySelector('#example-svg');
let myAnimation = new LazyLinePainter(el, { strokeWidth: 10 });
myAnimation.paint();
```
