---
title: æ°´å°ç»„ä»¶
date: 2025-07-15 10:17:00
permalink: /notes/watermark
categories:
  - ç¬”è®°
tags:
  - JS
  - æ°´å°
---

# æ°´å°ç»„ä»¶å®ç°ä¸ä½¿ç”¨

æ°´å°æ˜¯ä¸€ç§é‡è¦çš„ç‰ˆæƒä¿æŠ¤å’Œå“ç‰Œæ ‡è¯†æŠ€æœ¯ï¼Œå¹¿æ³›åº”ç”¨äºæ–‡æ¡£ã€å›¾ç‰‡ã€è§†é¢‘ç­‰æ•°å­—å†…å®¹ä¸­ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•å®ç°ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„å‰ç«¯æ°´å°ç»„ä»¶ã€‚

## ğŸ¯ æ°´å°çš„ä½œç”¨ä¸æ„ä¹‰

### ä¸»è¦ç”¨é€”

- **ç‰ˆæƒä¿æŠ¤**: é˜²æ­¢å†…å®¹è¢«éæ³•å¤åˆ¶å’Œä½¿ç”¨
- **å“ç‰Œæ ‡è¯†**: å¢å¼ºå“ç‰Œæ›å…‰å’Œè¯†åˆ«åº¦
- **æº¯æºè¿½è¸ª**: å¸®åŠ©è¿½è¸ªå†…å®¹çš„æ¥æºå’Œä¼ æ’­è·¯å¾„
- **é˜²ç¯¡æ”¹**: æ£€æµ‹å†…å®¹æ˜¯å¦è¢«æ¶æ„ä¿®æ”¹

### åº”ç”¨åœºæ™¯

- **æ–‡æ¡£ç³»ç»Ÿ**: åˆåŒã€æŠ¥å‘Šã€è¯ä¹¦ç­‰é‡è¦æ–‡æ¡£
- **å›¾ç‰‡å±•ç¤º**: æ‘„å½±ä½œå“ã€è®¾è®¡ç¨¿ã€äº§å“å›¾ç‰‡
- **è§†é¢‘å†…å®¹**: æ•™å­¦è§†é¢‘ã€å®£ä¼ ç‰‡ã€ç›´æ’­å†…å®¹
- **ç½‘é¡µå†…å®¹**: é˜²æ­¢é¡µé¢å†…å®¹è¢«æˆªå›¾ç›—ç”¨

## ğŸ“ å·¥ä½œåŸç†

```mermaid
graph TD
    A[æ°´å°ç»„ä»¶] --> B[å‚æ•°é…ç½®]
    A --> C[æ°´å°ç»˜åˆ¶]
    A --> D[å®‰å…¨é˜²æŠ¤]
    A --> E[åŠ¨ç”»æ•ˆæœ]

    B --> B1[æ–‡æœ¬å†…å®¹]
    B --> B2[å›¾ç‰‡URL]
    B --> B3[æ ·å¼è®¾ç½®]
    B --> B4[ä½ç½®æ§åˆ¶]

    C --> C1[Canvasç»˜åˆ¶]
    C --> C2[ç¦»å±æ¸²æŸ“]
    C --> C3[ç¼“å­˜æœºåˆ¶]

    D --> D1[DOMç›‘æ§]
    D --> D2[æ ·å¼ä¿æŠ¤]
    D --> D3[é˜²åˆ é™¤æœºåˆ¶]

    E --> E1[æ·¡å…¥æ·¡å‡º]
    E --> E2[æ—‹è½¬åŠ¨ç”»]
    E --> E3[è‡ªå®šä¹‰åŠ¨ç”»]
```

## ğŸ› ï¸ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### æ–¹æ¡ˆå¯¹æ¯”

| å®ç°æ–¹å¼        | ä¼˜ç‚¹               | ç¼ºç‚¹                   | é€‚ç”¨åœºæ™¯     |
| --------------- | ------------------ | ---------------------- | ------------ |
| **Canvas ç»˜åˆ¶** | çµæ´»åº¦é«˜ï¼Œæ•ˆæœä¸°å¯Œ | æ€§èƒ½å¼€é”€å¤§ï¼Œä¸æ”¯æŒ SEO | å¤æ‚æ°´å°æ•ˆæœ |
| **CSS èƒŒæ™¯**    | æ€§èƒ½å¥½ï¼Œå®ç°ç®€å•   | åŠŸèƒ½æœ‰é™ï¼Œæ˜“è¢«ä¿®æ”¹     | ç®€å•æ–‡å­—æ°´å° |
| **SVG å®ç°**    | çŸ¢é‡å›¾å½¢ï¼Œç¼©æ”¾æ¸…æ™° | å…¼å®¹æ€§é—®é¢˜             | å›¾å½¢æ°´å°     |
| **DOM è¦†ç›–**    | å®ç°ç®€å•ï¼Œå…¼å®¹æ€§å¥½ | å®¹æ˜“è¢«åˆ é™¤             | åŸºç¡€é˜²æŠ¤éœ€æ±‚ |

## ğŸ’» æ ¸å¿ƒå®ç°

### React æ°´å°ç»„ä»¶

<demo react="react/Watermark/index.tsx" 
:reactFiles="['react/Watermark/index.tsx','react/Watermark/MdWatermark.tsx']" 
/>

### åŸºç¡€å®ç°åŸç†

```typescript
interface WatermarkProps {
	text?: string; // æ°´å°æ–‡å­—
	fontSize?: number; // å­—ä½“å¤§å°
	color?: string; // æ–‡å­—é¢œè‰²
	opacity?: number; // é€æ˜åº¦
	rotate?: number; // æ—‹è½¬è§’åº¦
	gap?: [number, number]; // æ°´å°é—´è·
	offset?: [number, number]; // åç§»é‡
	image?: string; // å›¾ç‰‡æ°´å°
	children?: React.ReactNode; // å­ç»„ä»¶
}

const Watermark: React.FC<WatermarkProps> = ({
	text = 'Watermark',
	fontSize = 16,
	color = 'rgba(0, 0, 0, 0.15)',
	opacity = 1,
	rotate = -22,
	gap = [100, 100],
	offset = [0, 0],
	image,
	children
}) => {
	// å®ç°é€»è¾‘...
};
```

### Canvas ç»˜åˆ¶æ°´å°

```javascript
function createWatermarkCanvas(options) {
	const { text, fontSize, color, opacity, rotate, gap, image } = options;

	const canvas = document.createElement('canvas');
	const ctx = canvas.getContext('2d');

	// è®¾ç½®ç”»å¸ƒå°ºå¯¸
	const [gapX, gapY] = gap;
	canvas.width = gapX;
	canvas.height = gapY;

	// è®¾ç½®æ–‡å­—æ ·å¼
	ctx.font = `${fontSize}px Arial`;
	ctx.fillStyle = color;
	ctx.globalAlpha = opacity;
	ctx.textAlign = 'center';
	ctx.textBaseline = 'middle';

	// æ—‹è½¬ç”»å¸ƒ
	ctx.translate(canvas.width / 2, canvas.height / 2);
	ctx.rotate((rotate * Math.PI) / 180);

	if (image) {
		// ç»˜åˆ¶å›¾ç‰‡æ°´å°
		const img = new Image();
		img.onload = () => {
			ctx.drawImage(img, -img.width / 2, -img.height / 2);
		};
		img.src = image;
	} else {
		// ç»˜åˆ¶æ–‡å­—æ°´å°
		ctx.fillText(text, 0, 0);
	}

	return canvas.toDataURL();
}
```

### é«˜çº§åŠŸèƒ½å®ç°

```typescript
interface WatermarkProps {
	/** æ°´å°æ–‡æœ¬å†…å®¹ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„ï¼ˆå¤šè¡Œæ–‡æœ¬ï¼‰ \*/
	content?: string | string[];
	/** å¤šè¡Œæ–‡æœ¬è¡Œé—´è· \*/
	lineHeight?: number;
	/**æ°´å°å›¾ç‰‡ URL æˆ– Base64 å­—ç¬¦ä¸² \*/
	imageUrl?: string;
	/** æ°´å°å›¾ç‰‡å®½åº¦ \*/
	imageWidth?: number;
	/** æ°´å°å›¾ç‰‡é«˜åº¦ \*/
	imageHeight?: number;
	/** æ°´å°æ–‡æœ¬é¢œè‰² \*/
	color?: string;
	/** æ°´å°æ–‡æœ¬å­—ä½“å¤§å° \*/
	fontSize?: number;
	/** æ°´å°æ—‹è½¬è§’åº¦ï¼ˆåº¦ï¼‰ \*/
	rotate?: number;
	/** å®¹å™¨ç±»å \*/
	className?: string;
	/** å®¹å™¨æ ·å¼ \*/
	style?: React.CSSProperties;
	/** å­å…ƒç´  _/
children: React.ReactNode;
/** æ°´å°é—´è· [x, y]\*/
	gap?: [number, number];
	/** æ°´å°åº”ç”¨çš„å®¹å™¨ï¼Œé»˜è®¤ä¸ºç»„ä»¶è‡ªèº«çš„å®¹å™¨ \*/
	container?: React.RefObject<HTMLElement> | null;
	/** æ°´å°é€æ˜åº¦ï¼ˆ0-1ï¼‰ _/
opacity?: number;
/** æ°´å°å¯¹é½æ–¹å¼ \*/
	align?: WatermarkAlign;
	/** æ°´å°é‡å¤æ¨¡å¼ \*/
	repeat?: WatermarkRepeat;
	/** æ°´å°åç§»é‡ \*/
	offset?: WatermarkOffset;
	/** æ°´å°å±‚çº§ \*/
	zIndex?: number;
	/** å“åº”å¼é…ç½® \*/
	responsiveOptions?: WatermarkResponsiveOptions;
	/** æ˜¯å¦å¯ç”¨æ€§èƒ½ä¼˜åŒ– \*/
	optimizePerformance?: boolean;
	/** åŠ¨ç”»ç±»å‹ \*/
	animation?: WatermarkAnimation;
	/** åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ \*/
	animationDuration?: number;
	/** åŠ¨ç”»å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ \*/
	animationDelay?: number;
}
```

## ğŸ“Š ECharts å›¾è¡¨æ°´å°

å¯¹äºæ•°æ®å¯è§†åŒ–é¡¹ç›®ï¼Œæˆ‘ä»¬è¿˜å®ç°äº†ä¸“é—¨é’ˆå¯¹ ECharts å›¾è¡¨çš„æ°´å°æ–¹æ¡ˆã€‚è¯¥æ–¹æ¡ˆå°†æ°´å°ç›´æ¥é›†æˆåˆ°å›¾è¡¨èƒŒæ™¯ä¸­ï¼Œæ—¢ä¸å½±å“å›¾è¡¨äº¤äº’ï¼Œåˆèƒ½åœ¨å¯¼å‡ºå›¾ç‰‡æ—¶è‡ªåŠ¨åŒ…å«æ°´å°ã€‚

æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å®ç°äº†å¤šç§æ°´å°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬é¡µé¢çº§æ°´å°å’ŒæŒ‡å®š DOM èŠ‚ç‚¹æ°´å°ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚

### å®ç°åŸç†

ECharts å›¾è¡¨æ°´å°é€šè¿‡ Canvas ç»˜åˆ¶æ°´å°å›¾æ¡ˆï¼Œç„¶åå°†è¯¥å›¾æ¡ˆä½œä¸º ECharts çš„èƒŒæ™¯å›¾æ¡ˆæ¥å®ç°ï¼š

```javascript
// åˆ›å»ºæ°´å° Canvas
const canvas = document.createElement('canvas');
const ctx = canvas.getContext('2d');

// é…ç½® Canvas
canvas.width = canvas.height = 100;
ctx.textAlign = 'center';
ctx.textBaseline = 'middle';
ctx.globalAlpha = 0.08;
ctx.font = '20px Microsoft Yahei';
ctx.translate(50, 50);
ctx.rotate(-Math.PI / 4);
ctx.fillText('ECHARTS', 0, 0);

// ECharts é…ç½®
backgroundColor: {
  type: 'pattern',
  image: canvas,
  repeat: 'repeat'
}
```

### React ç»„ä»¶ç¤ºä¾‹

#### ECharts å›¾è¡¨æ°´å°

<demo react="react/Watermark/EchartsWatermark.tsx" 
:reactFiles="['react/Watermark/EchartsWatermark.tsx']" 
/>

#### é¡µé¢çº§æ°´å°

<demo react="react/Watermark/PageWatermark.tsx" 
:reactFiles="['react/Watermark/PageWatermark.tsx']" 
/>

#### æŒ‡å®š DOM èŠ‚ç‚¹æ°´å°

<demo react="react/Watermark/DomWatermark.tsx" 
:reactFiles="['react/Watermark/DomWatermark.tsx']" 
/>

### ä¼˜åŠ¿ç‰¹ç‚¹

1. **ä¸“é—¨é’ˆå¯¹å›¾è¡¨ä¼˜åŒ–**ï¼šå®Œç¾è§£å†³äº†å›¾è¡¨åœºæ™¯ä¸‹çš„æ°´å°éœ€æ±‚
2. **å¯¼å‡ºå›¾ç‰‡è‡ªå¸¦æ°´å°**ï¼šçœå»äº†å¯¼å‡ºåæ‰‹åŠ¨åŠ æ°´å°çš„éº»çƒ¦
3. **ä¸å½±å“å›¾è¡¨äº¤äº’**ï¼šç”¨æˆ·å¯ä»¥æ­£å¸¸æ“ä½œå›¾è¡¨
4. **è§†è§‰æ•ˆæœè‡ªç„¶**ï¼šæ°´å°ä¸å›¾è¡¨èƒŒæ™¯èä¸ºä¸€ä½“
5. **é˜²ç¯¡æ”¹æœºåˆ¶**ï¼šåˆ©ç”¨ MutationObserver å®ç°æ°´å°çš„è‡ªåŠ¨æ¢å¤
6. **å¤šç§å®ç°æ–¹æ¡ˆ**ï¼šæ”¯æŒå›¾è¡¨ã€é¡µé¢ã€DOM èŠ‚ç‚¹ç­‰å¤šç§æ°´å°æ–¹æ¡ˆ

## ğŸ”’ å®‰å…¨é˜²æŠ¤æœºåˆ¶

### é˜²åˆ é™¤ä¿æŠ¤

```javascript
class WatermarkProtector {
	constructor(container, watermarkElement) {
		this.container = container;
		this.watermarkElement = watermarkElement;
		this.observer = null;
		this.init();
	}

	init() {
		// ä½¿ç”¨ MutationObserver ç›‘æ§ DOM å˜åŒ–
		this.observer = new MutationObserver(mutations => {
			mutations.forEach(mutation => {
				// æ£€æµ‹æ°´å°å…ƒç´ æ˜¯å¦è¢«åˆ é™¤
				if (mutation.type === 'childList') {
					const removedNodes = Array.from(mutation.removedNodes);
					if (removedNodes.includes(this.watermarkElement)) {
						this.restoreWatermark();
					}
				}

				// æ£€æµ‹æ ·å¼æ˜¯å¦è¢«ä¿®æ”¹
				if (mutation.type === 'attributes' && mutation.target === this.watermarkElement) {
					this.restoreWatermark();
				}
			});
		});

		// å¼€å§‹ç›‘æ§
		this.observer.observe(this.container, {
			childList: true,
			attributes: true,
			subtree: true
		});
	}

	restoreWatermark() {
		// é‡æ–°åˆ›å»ºæ°´å°
		console.warn('æ°´å°è¢«ç¯¡æ”¹ï¼Œæ­£åœ¨æ¢å¤...');
		this.createWatermark();
	}

	createWatermark() {
		// é‡æ–°ç”Ÿæˆæ°´å°å…ƒç´ 
		const newWatermark = this.generateWatermarkElement();
		this.container.appendChild(newWatermark);
		this.watermarkElement = newWatermark;
	}

	destroy() {
		if (this.observer) {
			this.observer.disconnect();
		}
	}
}
```

### æ ·å¼ä¿æŠ¤

```javascript
// ä½¿ç”¨ CSS è‡ªå®šä¹‰å±æ€§å¢åŠ ä¿®æ”¹éš¾åº¦
function setProtectedStyles(element, styles) {
	const styleSheet = document.createElement('style');
	const randomClass = `watermark-${Math.random().toString(36).substr(2, 9)}`;

	element.className = randomClass;

	const cssRules = Object.entries(styles)
		.map(([key, value]) => `${key}: ${value} !important;`)
		.join(' ');

	styleSheet.textContent = `.${randomClass} { ${cssRules} }`;
	document.head.appendChild(styleSheet);

	return styleSheet;
}
```

### é˜²æˆªå›¾ä¿æŠ¤

```javascript
// æ£€æµ‹å¼€å‘è€…å·¥å…·
function detectDevTools() {
	const threshold = 160;

	setInterval(() => {
		if (
			window.outerHeight - window.innerHeight > threshold ||
			window.outerWidth - window.innerWidth > threshold
		) {
			console.warn('æ£€æµ‹åˆ°å¼€å‘è€…å·¥å…·ï¼Œæ°´å°ä¿æŠ¤å·²æ¿€æ´»');
			// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ é¢å¤–çš„ä¿æŠ¤æªæ–½
		}
	}, 1000);
}

// ç¦ç”¨å³é”®èœå•
document.addEventListener('contextmenu', e => {
	e.preventDefault();
});

// ç¦ç”¨å¸¸ç”¨å¿«æ·é”®
document.addEventListener('keydown', e => {
	// ç¦ç”¨ F12, Ctrl+Shift+I, Ctrl+U ç­‰
	if (
		e.key === 'F12' ||
		(e.ctrlKey && e.shiftKey && e.key === 'I') ||
		(e.ctrlKey && e.key === 'u')
	) {
		e.preventDefault();
	}
});
```

## ğŸ¨ é«˜çº§åŠŸèƒ½

### åŠ¨æ€æ°´å°

```javascript
class DynamicWatermark {
	constructor(options) {
		this.options = options;
		this.currentUser = this.getCurrentUser();
		this.timestamp = new Date().toLocaleString();
	}

	generateDynamicText() {
		const { template } = this.options;

		return template
			.replace('{{user}}', this.currentUser)
			.replace('{{time}}', this.timestamp)
			.replace('{{ip}}', this.getUserIP());
	}

	getCurrentUser() {
		// è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
		return localStorage.getItem('username') || 'åŒ¿åç”¨æˆ·';
	}

	async getUserIP() {
		try {
			const response = await fetch('https://api.ipify.org?format=json');
			const data = await response.json();
			return data.ip;
		} catch {
			return 'æœªçŸ¥IP';
		}
	}
}
```

### æ‰¹é‡æ°´å°å¤„ç†

```javascript
class BatchWatermark {
	constructor(options) {
		this.options = options;
		this.queue = [];
		this.processing = false;
	}

	addToQueue(elements) {
		this.queue.push(...elements);
		if (!this.processing) {
			this.processQueue();
		}
	}

	async processQueue() {
		this.processing = true;

		while (this.queue.length > 0) {
			const element = this.queue.shift();
			await this.processElement(element);

			// é¿å…é˜»å¡ä¸»çº¿ç¨‹
			await new Promise(resolve => setTimeout(resolve, 10));
		}

		this.processing = false;
	}

	async processElement(element) {
		const watermarkData = await this.generateWatermark(this.options);
		this.applyWatermark(element, watermarkData);
	}
}
```

### å“åº”å¼æ°´å°

```javascript
class ResponsiveWatermark {
	constructor(container, options) {
		this.container = container;
		this.options = options;
		this.resizeObserver = null;
		this.init();
	}

	init() {
		this.createWatermark();
		this.setupResizeObserver();
	}

	setupResizeObserver() {
		this.resizeObserver = new ResizeObserver(entries => {
			for (const entry of entries) {
				this.updateWatermarkSize(entry.contentRect);
			}
		});

		this.resizeObserver.observe(this.container);
	}

	updateWatermarkSize(rect) {
		const { width, height } = rect;

		// æ ¹æ®å®¹å™¨å¤§å°è°ƒæ•´æ°´å°å‚æ•°
		const fontSize = Math.max(12, Math.min(24, width / 50));
		const gap = [width / 8, height / 8];

		this.options.fontSize = fontSize;
		this.options.gap = gap;

		this.recreateWatermark();
	}
}
```

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…

### è§¦æ‘¸äº‹ä»¶å¤„ç†

```javascript
// ç¦ç”¨é•¿æŒ‰ä¿å­˜å›¾ç‰‡
document.addEventListener('touchstart', e => {
	if (e.touches.length > 1) {
		e.preventDefault();
	}
});

// ç¦ç”¨åŒå‡»ç¼©æ”¾
let lastTouchEnd = 0;
document.addEventListener('touchend', e => {
	const now = Date.now();
	if (now - lastTouchEnd <= 300) {
		e.preventDefault();
	}
	lastTouchEnd = now;
});
```

### è®¾å¤‡åƒç´ æ¯”é€‚é…

```javascript
function getDevicePixelRatio() {
	return window.devicePixelRatio || 1;
}

function createHighDPICanvas(width, height) {
	const canvas = document.createElement('canvas');
	const ctx = canvas.getContext('2d');
	const ratio = getDevicePixelRatio();

	canvas.width = width * ratio;
	canvas.height = height * ratio;
	canvas.style.width = width + 'px';
	canvas.style.height = height + 'px';

	ctx.scale(ratio, ratio);

	return { canvas, ctx };
}
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### è™šæ‹ŸåŒ–æ¸²æŸ“

```javascript
class VirtualWatermark {
	constructor(container, options) {
		this.container = container;
		this.options = options;
		this.visibleWatermarks = new Map();
		this.watermarkPool = [];
	}

	render() {
		const visibleArea = this.getVisibleArea();
		const requiredWatermarksCount = this.calculateRequiredWatermarksCount(visibleArea);

		// å›æ”¶ä¸å¯è§çš„æ°´å°
		this.recycleInvisibleWatermarks(visibleArea);

		// åˆ›å»ºæ–°çš„å¯è§æ°´å°
		this.createVisibleWatermarks(requiredWatermarksCount);
	}

	recycleInvisibleWatermarks(visibleArea) {
		this.visibleWatermarks.forEach((watermark, key) => {
			if (!this.isInVisibleArea(watermark, visibleArea)) {
				this.watermarkPool.push(watermark);
				this.visibleWatermarks.delete(key);
				watermark.style.display = 'none';
			}
		});
	}
}
```

### ç¼“å­˜æœºåˆ¶

```javascript
class WatermarkCache {
	constructor() {
		this.cache = new Map();
		this.maxSize = 50;
	}

	generateKey(options) {
		return JSON.stringify(options);
	}

	get(options) {
		const key = this.generateKey(options);
		return this.cache.get(key);
	}

	set(options, watermarkData) {
		const key = this.generateKey(options);

		if (this.cache.size >= this.maxSize) {
			const firstKey = this.cache.keys().next().value;
			this.cache.delete(firstKey);
		}

		this.cache.set(key, watermarkData);
	}
}
```

## ğŸ§ª æ•…éšœæ’é™¤

### 1. æ°´å°æ˜¾ç¤ºå¼‚å¸¸

**é—®é¢˜**: æ°´å°åœ¨æŸäº›æµè§ˆå™¨ä¸­æ˜¾ç¤ºä¸æ­£å¸¸æˆ–ä½ç½®åç§»
**è§£å†³æ–¹æ¡ˆ**:

- æ£€æŸ¥ Canvas ç»˜åˆ¶æ—¶çš„è®¾å¤‡åƒç´ æ¯”å¤„ç†
- ç¡®ä¿ CSS æ ·å¼æ­£ç¡®åº”ç”¨
- æµ‹è¯•ä¸åŒæµè§ˆå™¨çš„å…¼å®¹æ€§

### 2. æ€§èƒ½é—®é¢˜

**é—®é¢˜**: é¡µé¢åŠ è½½å¤§é‡æ°´å°æ—¶å‡ºç°å¡é¡¿
**è§£å†³æ–¹æ¡ˆ**:

- å¯ç”¨æ€§èƒ½ä¼˜åŒ–é€‰é¡¹
- ä½¿ç”¨ç¦»å± Canvas ç»˜åˆ¶
- å®ç°æ°´å°ç¼“å­˜æœºåˆ¶

### 3. å®‰å…¨é˜²æŠ¤å¤±æ•ˆ

**é—®é¢˜**: æ°´å°è¢«è½»æ˜“åˆ é™¤æˆ–ä¿®æ”¹
**è§£å†³æ–¹æ¡ˆ**:

- å¢å¼º DOM ç›‘æ§æœºåˆ¶
- æ·»åŠ å¤šé‡é˜²æŠ¤ç­–ç•¥
- å®šæœŸæ›´æ–°é˜²æŠ¤é€»è¾‘

## ğŸ› ï¸ æŠ€æœ¯è¦ç‚¹

### 1. Canvas ç»˜åˆ¶æŠ€æœ¯

- ä½¿ç”¨ç¦»å± Canvas æé«˜ç»˜åˆ¶æ€§èƒ½
- æ­£ç¡®å¤„ç†è®¾å¤‡åƒç´ æ¯”ä»¥ç¡®ä¿æ¸…æ™°åº¦
- å®ç°æ—‹è½¬å’Œç¼©æ”¾æ•ˆæœ

### 2. DOM ç›‘æ§æœºåˆ¶

- åˆ©ç”¨ MutationObserver ç›‘æ§ DOM å˜åŒ–
- å®æ—¶æ£€æµ‹æ°´å°å…ƒç´ çš„åˆ é™¤å’Œä¿®æ”¹
- è‡ªåŠ¨æ¢å¤è¢«ç¯¡æ”¹çš„æ°´å°

### 3. å“åº”å¼è®¾è®¡

- ä½¿ç”¨ ResizeObserver ç›‘å¬å®¹å™¨å°ºå¯¸å˜åŒ–
- åŠ¨æ€è°ƒæ•´æ°´å°å‚æ•°ä»¥é€‚åº”ä¸åŒå±å¹•
- å®ç°é«˜æ€§èƒ½çš„é‡ç»˜æœºåˆ¶

## ğŸ¯ æœ€ä½³å®è·µ

### è®¾è®¡åŸåˆ™

1. **ä¸å½±å“ç”¨æˆ·ä½“éªŒ**: æ°´å°åº”è¯¥å°½é‡ä¸å¹²æ‰°æ­£å¸¸çš„å†…å®¹é˜…è¯»
2. **é€‚åº¦ä¿æŠ¤**: å¹³è¡¡å®‰å…¨æ€§å’Œç”¨æˆ·ä½“éªŒ
3. **æ€§èƒ½ä¼˜å…ˆ**: é¿å…æ°´å°åŠŸèƒ½å½±å“é¡µé¢æ€§èƒ½
4. **å…¼å®¹æ€§è€ƒè™‘**: ç¡®ä¿åœ¨ä¸åŒæµè§ˆå™¨å’Œè®¾å¤‡ä¸Šæ­£å¸¸å·¥ä½œ

### å®æ–½å»ºè®®

1. **æ¸è¿›å¢å¼º**: ä»åŸºç¡€åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥æ·»åŠ é«˜çº§ç‰¹æ€§
2. **ç”¨æˆ·æ•™è‚²**: å‘ç”¨æˆ·è¯´æ˜æ°´å°çš„ä½œç”¨å’Œé‡è¦æ€§
3. **ç›‘æ§å‘Šè­¦**: å»ºç«‹æ°´å°ç¯¡æ”¹çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶
4. **å®šæœŸæ›´æ–°**: æ ¹æ®æ–°çš„æ”»å‡»æ‰‹æ®µæ›´æ–°é˜²æŠ¤ç­–ç•¥

### æ³•å¾‹åˆè§„

1. **éšç§ä¿æŠ¤**: ç¡®ä¿æ°´å°ä¸­çš„ä¸ªäººä¿¡æ¯ç¬¦åˆéšç§æ³•è§„
2. **ç”¨æˆ·åŒæ„**: åœ¨å¿…è¦æ—¶è·å¾—ç”¨æˆ·å¯¹æ°´å°åŠŸèƒ½çš„åŒæ„
3. **æ•°æ®å®‰å…¨**: ä¿æŠ¤æ°´å°ç›¸å…³çš„æ•æ„Ÿä¿¡æ¯

---

_æ°´å°æŠ€æœ¯æ˜¯æ•°å­—å†…å®¹ä¿æŠ¤çš„é‡è¦æ‰‹æ®µï¼Œåˆç†å®æ–½å¯ä»¥æœ‰æ•ˆä¿æŠ¤çŸ¥è¯†äº§æƒå’Œå“ç‰Œä»·å€¼ã€‚è®°ä½ï¼ŒæŠ€æœ¯æ‰‹æ®µåªæ˜¯è¾…åŠ©ï¼Œå®Œå–„çš„æ³•å¾‹ä¿æŠ¤å’Œç”¨æˆ·æ•™è‚²åŒæ ·é‡è¦ã€‚_ ğŸ”’
